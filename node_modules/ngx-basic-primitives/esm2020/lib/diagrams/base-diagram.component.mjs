import { Component, Input, ViewChild } from '@angular/core';
import { OrientationType } from '../enums';
import { Graphics } from './graphics';
import { Rect, Size, Point } from '../structs';
// @ts-ignore
import { getFixOfPixelAlignment, getInnerSize, getElementOffset } from 'basicprimitives';
import { AnnotationLabelTemplate, ButtonsTemplate, CheckBoxTemplate, CursorTemplate, DotHighlightTemplate, GroupTitleTemplate, HighlightTemplate, ItemTemplate, UserTemplate, CustomRenderTemplate, LabelAnnotationTemplate, LevelTitleTemplate, LevelBackgroundTemplate } from './templates';
import * as i0 from "@angular/core";
import * as i1 from "./task-manager-factory";
import * as i2 from "./rotated-text.component";
import * as i3 from "./components/item.component";
import * as i4 from "./components/checkbox.component";
import * as i5 from "./components/group-title.component";
import * as i6 from "./components/cursor.component";
import * as i7 from "./components/highlight.component";
import * as i8 from "./components/dot-highlight.component";
import * as i9 from "./components/level-title.component";
import * as i10 from "./components/level-background.component";
import * as i11 from "@angular/common";
class LayoutOptions {
    constructor(config = {}) {
        this.autoSize = false;
        this.controlSize = new Size();
        this.scale = 1;
        this.frameMousePanelRect = new Rect();
        this.framePlaceholderSize = new Size();
        this.titlesMousePanelRect = new Rect();
        this.titlesPlaceholderSize = new Size();
        this.scrollPanelRect = new Rect();
        this.mousePanelSize = new Size();
        this.placeholderSize = new Size();
        Object.assign(this, config);
    }
}
class BaseDiagramState {
    constructor() {
        this.viewportSize = new Size(0, 0);
        this.contentPosition = new Point(0, 0);
        this.centerOnCursor = true;
        this.highlightItem = null;
        this.cursorItem = null;
        this.selectedItems = [];
    }
}
;
export class BaseDiagramComponent {
    constructor(host, zone, taskManagerFactory) {
        this.host = host;
        this.zone = zone;
        this.centerOnCursor = true;
        this.state = new BaseDiagramState();
        this.layoutOptions = new LayoutOptions();
        this.timer = null;
        this.templatesHash = {};
        /* Component template properties */
        this.placeholder = null;
        this.framePlaceholder = null;
        this.titlesPlaceholder = null;
        this.calloutPlaceholder = null;
        this.controlPanelStyle = {};
        this.frameMousePanelStyle = {};
        this.framePlaceholderStyle = {};
        this.titlesMousePanelStyle = {};
        this.titlesPlaceholderStyle = {};
        this.scrollPanelStyle = {};
        this.placeholderOffset = undefined;
        this.mousePanelStyle = {};
        this.placeholderStyle = {};
        this.calloutPlaceholderStyle = {};
        this.taskManagerFactory = taskManagerFactory;
        this.graphics = new Graphics(new Size(0, 0));
        var templates = {
            AnnotationLabelTemplate,
            ButtonsTemplate,
            CheckBoxTemplate,
            CursorTemplate,
            DotHighlightTemplate,
            GroupTitleTemplate,
            HighlightTemplate,
            ItemTemplate,
            UserTemplate,
            CustomRenderTemplate,
            LabelAnnotationTemplate,
            LevelTitleTemplate,
            LevelBackgroundTemplate
        };
        this.tasks = taskManagerFactory.factory(this.getOptions.bind(this), this.getGraphics.bind(this), this.getLayout.bind(this), this.setLayout.bind(this), templates);
        this.layoutOptions = new LayoutOptions();
    }
    ngAfterViewInit() {
        var onSizeChanged = this.onSizeChanged.bind(this);
        this.observer = new ResizeObserver(() => this.zone.run(() => onSizeChanged()));
        this.observer.observe(this.controlPanelRef.nativeElement);
        this.fixPixelAlignment();
    }
    _onHighlightChanging(event, itemId, newItemId) { }
    ;
    _onHighlightChanged(eventArgs) { }
    ;
    _onCursorChanging(event, itemId, newItemId) { }
    ;
    _onCursorChanged(eventArgs) { }
    ;
    _onSelectionChanging(event, selectedItems, newSelectedItems) { }
    ;
    _onSelectionChanged(eventArgs) { }
    ;
    onItemRender(data) {
        const { templateName } = data;
        const template = this.templatesHash[templateName];
        return template.itemTemplate;
    }
    onHighlightRender(data) {
        const { templateName } = data;
        const template = this.templatesHash[templateName];
        return template.highlightTemplate;
    }
    onCursorRender(data) {
        const { templateName } = data;
        const template = this.templatesHash[templateName];
        return template.cursorTemplate;
    }
    getOptions() {
        const { config } = this.state;
        const templates = config.templates || [];
        this.templatesHash = {};
        templates.forEach(template => {
            this.templatesHash[template.name] = template;
        });
        const effectiveTemplates = templates.map(template => {
            const { buttonsTemplate } = template;
            return {
                ...template,
                onButtonsRender: !buttonsTemplate ? null : () => buttonsTemplate
            };
        });
        const { highlightItem, cursorItem, selectedItems } = this.state;
        return {
            ...config,
            templates: effectiveTemplates,
            highlightItem,
            cursorItem,
            selectedItems,
            onItemRender: this.onItemRender.bind(this),
            onCursorRender: this.onCursorRender.bind(this),
            onHighlightRender: this.onHighlightRender.bind(this),
            onGroupTitleRender: !config.groupTitleTemplate ? null : () => config.groupTitleTemplate,
            onLevelBackgroundRender: !config.levelBackgroundTemplate ? null : () => config.levelBackgroundTemplate,
            onLevelTitleRender: !config.levelTitleTemplate ? null : () => config.levelTitleTemplate,
            onButtonsRender: !config.buttonsTemplate ? null : () => config.buttonsTemplate
        };
    }
    getGraphics() {
        return this.graphics;
    }
    getLayout() {
        var centerOnCursor = this.state.centerOnCursor;
        var viewportSize = this.state.viewportSize;
        var contentPosition = this.state.contentPosition;
        // var { centerOnCursor, viewportSize, contentPosition } = this.state;
        return {
            forceCenterOnCursor: centerOnCursor,
            scrollPanelSize: new Size(viewportSize.width, viewportSize.height),
            placeholderOffset: new Point(contentPosition.x, contentPosition.y)
        };
    }
    setLayout(layoutOptions) {
        const { autoSize, // resize control if true
        controlSize, // Sets control Size in auto scale mode
        scale, // scale is needed for scale transform CSS creation
        frameMousePanelRect, framePlaceholderSize, // the frame content size before CSS Scale Transform applied
        titlesMousePanelRect, titlesPlaceholderSize, // Titles size before CSS Scale Transform applied
        scrollPanelRect, mousePanelSize, // Content mouse panel size
        placeholderSize // Content size before CSS Scale Transform applied
         } = layoutOptions;
        this.layoutOptions = new LayoutOptions({
            autoSize,
            controlSize: new Size(controlSize.width, controlSize.height),
            scale,
            frameMousePanelRect: new Rect(frameMousePanelRect.x, frameMousePanelRect.y, frameMousePanelRect.width, frameMousePanelRect.height),
            framePlaceholderSize: new Size(framePlaceholderSize.width, framePlaceholderSize.height),
            titlesMousePanelRect: new Rect(titlesMousePanelRect.x, titlesMousePanelRect.y, titlesMousePanelRect.width, titlesMousePanelRect.height),
            titlesPlaceholderSize: new Size(titlesPlaceholderSize.width, titlesPlaceholderSize.height),
            scrollPanelRect: new Rect(scrollPanelRect.x, scrollPanelRect.y, scrollPanelRect.width, scrollPanelRect.height),
            mousePanelSize: new Size(mousePanelSize.width, mousePanelSize.height),
            placeholderSize: new Size(placeholderSize.width, placeholderSize.height)
        });
    }
    fixPixelAlignment() {
        const { nativeElement } = this.controlPanelRef;
        var pixelAlignmentFix = getFixOfPixelAlignment(nativeElement);
        nativeElement.style.marginLeft = pixelAlignmentFix.width + "px";
        nativeElement.style.marginTop = pixelAlignmentFix.height + "px";
    }
    onSizeChanged() {
        const { width, height } = getInnerSize(this.controlPanelRef.nativeElement);
        this.setState({
            viewportSize: new Size(width, height),
            centerOnCursor: true
        });
    }
    onScroll(event) {
        if (this.timer == null) {
            this.timer = window.setTimeout(this.onRefreshViewport.bind(this), 100);
        }
    }
    onRefreshViewport() {
        window.clearTimeout(this.timer);
        this.timer = null;
        const { scrollTop, scrollLeft } = this.scrollPanelRef.nativeElement;
        this.setState({
            contentPosition: new Point(Math.floor(scrollLeft), Math.floor(scrollTop)),
            centerOnCursor: false
        });
    }
    onFrameMouseMove(event) {
        const placeholderOffset = getElementOffset(this.frameMousePanelRef.nativeElement), x = event.pageX - placeholderOffset.left, y = event.pageY - placeholderOffset.top, projectItemsToFrameTask = this.tasks.getTask("ProjectItemsToFrameTask"), highlightItemOptionTask = this.tasks.getTask("HighlightItemOptionTask");
        if (highlightItemOptionTask.hasHighlightEnabled()) {
            const itemId = projectItemsToFrameTask.getTreeItemForMousePosition(x, y, highlightItemOptionTask.getGravityRadius());
            this.setHighlightItem(event, itemId);
        }
    }
    onFrameClick(event) {
        const placeholderOffset = getElementOffset(this.frameMousePanelRef.nativeElement), x = event.pageX - placeholderOffset.left, y = event.pageY - placeholderOffset.top, projectItemsToFrameTask = this.tasks.getTask("ProjectItemsToFrameTask"), cursorItemOptionTask = this.tasks.getTask("CursorItemOptionTask"), highlightItemOptionTask = this.tasks.getTask("HighlightItemOptionTask"), newCursorItemId = projectItemsToFrameTask.getTreeItemForMousePosition(x, y, highlightItemOptionTask.getGravityRadius());
        if (newCursorItemId !== null) {
            if (cursorItemOptionTask.hasCursorEnabled()) {
                this.setCursorItem(event, newCursorItemId);
                this.controlPanelRef.nativeElement.focus();
            }
        }
    }
    onMouseMove(event) {
        const placeholderOffset = getElementOffset(this.mousePanelRef.nativeElement), x = event.pageX - placeholderOffset.left, y = event.pageY - placeholderOffset.top, createTransformTask = this.tasks.getTask("CreateTransformTask"), highlightItemOptionTask = this.tasks.getTask("HighlightItemOptionTask");
        if (highlightItemOptionTask.hasHighlightEnabled()) {
            const itemId = createTransformTask.getTreeItemForMousePosition(x, y, highlightItemOptionTask.getGravityRadius());
            this.setHighlightItem(event, itemId);
        }
    }
    getEventArgs(oldTreeItemId, newTreeItemId, name = null) {
        var result = {}, combinedContextsTask = this.tasks.getTask("CombinedContextsTask"), alignDiagramTask = this.tasks.getTask("AlignDiagramTask"), oldItemConfig = combinedContextsTask.getConfig(oldTreeItemId), newItemConfig = combinedContextsTask.getConfig(newTreeItemId), itemPosition, offset, panelOffset;
        if (oldItemConfig && oldItemConfig.id != null) {
            result.oldContext = oldItemConfig;
        }
        if (newItemConfig && newItemConfig.id != null) {
            result.context = newItemConfig;
            if (newItemConfig.parent !== null) {
                result.parentItem = combinedContextsTask.getConfig(newItemConfig.parent);
            }
            panelOffset = getElementOffset(this.mousePanelRef.nativeElement);
            offset = getElementOffset(this.scrollPanelRef.nativeElement);
            itemPosition = alignDiagramTask.getItemPosition(newTreeItemId);
            result.position = new Rect(itemPosition.actualPosition)
                .translate(panelOffset.left, panelOffset.top)
                .translate(-offset.left, -offset.top);
        }
        if (name != null) {
            result.name = name;
        }
        return result;
    }
    setHighlightItem(event, newHighlightItemId) {
        let eventArgs, cancel = false;
        const { highlightItem } = this.state;
        if (newHighlightItemId !== highlightItem) {
            eventArgs = this._onHighlightChanging(event, highlightItem, newHighlightItemId);
            if (!eventArgs.cancel) {
                this.setState({
                    highlightItem: newHighlightItemId
                });
                this._onHighlightChanged(eventArgs);
            }
        }
    }
    setCursorItem(event, newCursorItemId) {
        let eventArgs, cancel = false;
        const { cursorItem } = this.state;
        if (newCursorItemId !== cursorItem) {
            eventArgs = this._onCursorChanging(event, cursorItem, newCursorItemId);
            if (!eventArgs.cancel) {
                this.setState({
                    cursorItem: newCursorItemId,
                    centerOnCursor: true
                });
                this._onCursorChanged(eventArgs);
            }
        }
    }
    onClick(event) {
        var placeholderOffset = getElementOffset(this.mousePanelRef.nativeElement), x = event.pageX - placeholderOffset.left, y = event.pageY - placeholderOffset.top, createTransformTask = this.tasks.getTask("CreateTransformTask"), cursorItemOptionTask = this.tasks.getTask("CursorItemOptionTask"), highlightItemOptionTask = this.tasks.getTask("HighlightItemOptionTask"), newCursorItemId = createTransformTask.getTreeItemForMousePosition(x, y, highlightItemOptionTask.getGravityRadius());
        var target = event.target;
        if (newCursorItemId !== null) {
            if (target.getAttribute("name") === "checkbox" || target.getAttribute("name") === "selectiontext") { //ignore jslint
            }
            else {
                if (cursorItemOptionTask.hasCursorEnabled()) {
                    this.setCursorItem(event, newCursorItemId);
                    this.controlPanelRef.nativeElement.focus();
                }
            }
        }
    }
    onCheckboxChange(event) {
        let { selectedItems } = this.state;
        let newSelectedItems = [];
        const target = event.target;
        var itemId = target.getAttribute("data-id");
        const checked = target.checked;
        let cancel = false;
        if (itemId != null) {
            if (checked) {
                newSelectedItems = [...selectedItems, itemId];
            }
            else {
                // eslint-disable-next-line
                newSelectedItems = selectedItems.filter(id => id != itemId); // User type may not mach string value in data attribute
            }
            var eventArgs = this._onSelectionChanging(event, selectedItems, newSelectedItems);
            if (!eventArgs.cancel) {
                this.setState({
                    selectedItems: newSelectedItems
                });
                this._onSelectionChanged(eventArgs);
            }
        }
    }
    onKeyDown(event) {
        var highlightItemTask = this.tasks.getTask("HighlightItemTask"), highlightItemOptionTask = this.tasks.getTask("HighlightItemOptionTask"), cursorItemTask = this.tasks.getTask("CursorItemTask"), cursorItemOptionTask = this.tasks.getTask("CursorItemOptionTask"), alignDiagramTask = this.tasks.getTask('AlignDiagramTask'), createTransformTask = this.tasks.getTask('CreateTransformTask'), transform = createTransformTask.getTransform(), navigationItem = null, newNavigationItem, direction = null, accepted;
        if (highlightItemOptionTask.hasHighlightEnabled() && cursorItemOptionTask.hasCursorEnabled()) {
            navigationItem = highlightItemTask.getHighlightTreeItem();
            if (navigationItem === null) {
                navigationItem = cursorItemTask.getCursorTreeItem();
            }
        }
        else if (highlightItemOptionTask.hasHighlightEnabled()) {
            navigationItem = highlightItemTask.getHighlightTreeItem();
        }
        else if (cursorItemOptionTask.hasCursorEnabled()) {
            navigationItem = cursorItemTask.getCursorTreeItem();
        }
        if (navigationItem != null) {
            switch (event.which) {
                case 13: /*Enter*/
                    if (cursorItemOptionTask.hasCursorEnabled()) {
                        this.setCursorItem(event, navigationItem);
                        event.preventDefault();
                        this.controlPanelRef.nativeElement.focus();
                    }
                    break;
                case 40: /*Down*/
                    direction = OrientationType.Bottom;
                    break;
                case 38: /*Up*/
                    direction = OrientationType.Top;
                    break;
                case 37: /*Left*/
                    direction = OrientationType.Left;
                    break;
                case 39: /*Right*/
                    direction = OrientationType.Right;
                    break;
                default:
                    break;
            }
            if (direction != null) {
                accepted = false;
                while (!accepted) {
                    accepted = true;
                    direction = transform.getOrientation(direction);
                    newNavigationItem = alignDiagramTask.getNextItem(navigationItem, direction);
                    if (newNavigationItem != null) {
                        event.preventDefault();
                        if (highlightItemOptionTask.hasHighlightEnabled()) {
                            this.setHighlightItem(event, newNavigationItem);
                        }
                        else if (cursorItemOptionTask.hasCursorEnabled()) {
                            this.setCursorItem(event, newNavigationItem);
                        }
                    }
                }
                this.controlPanelRef.nativeElement.focus();
            }
        }
    }
    setState(newState = {}) {
        this.state = {
            ...this.state,
            ...newState
        };
        this.render();
    }
    ngOnInit() {
        this.render();
    }
    render() {
        this.tasks.process('OptionsTask', null, false);
        const { placeholder, calloutplaceholder: calloutPlaceholder, frameplaceholder: framePlaceholder, titlesplaceholder: titlesPlaceholder } = this.graphics.placeholders;
        this.placeholder = placeholder;
        this.titlesPlaceholder = titlesPlaceholder;
        this.framePlaceholder = framePlaceholder;
        this.calloutPlaceholder = calloutPlaceholder;
        const { autoSize, // resize control if true
        controlSize, // Sets control Size in auto scale mode
        scale, // scale is needed for scale transform CSS creation
        frameMousePanelRect, titlesMousePanelRect, scrollPanelRect, mousePanelSize // Content mouse panel size
         } = this.layoutOptions;
        var scaleText = "scale(" + scale + "," + scale + ")";
        this.controlPanelStyle = autoSize ? controlSize.getCSS() : {};
        this.frameMousePanelStyle = frameMousePanelRect.getCSS();
        if (framePlaceholder) {
            this.framePlaceholderStyle = {
                ...(framePlaceholder.rect.getCSS()),
                "transform": scaleText,
                "msTransform": scaleText,
                "WebkitTransform": scaleText,
                "OTransform": scaleText,
                "MozTransform": scaleText
            };
        }
        this.titlesMousePanelStyle = {
            ...titlesMousePanelRect.getCSS()
        };
        if (titlesPlaceholder) {
            this.titlesPlaceholderStyle = {
                ...(titlesPlaceholder.rect.getCSS()),
                "transformOrigin": "0 0",
                "transform": scaleText,
                "msTransform": scaleText,
                "WebkitTransform": scaleText,
                "OTransform": scaleText,
                "MozTransform": scaleText
            };
        }
        this.scrollPanelStyle = {
            ...(scrollPanelRect.getCSS()),
            border: (scrollPanelRect.x > 0 ? "1px dotted #dddddd" : "")
        };
        this.mousePanelStyle = {
            ...(mousePanelSize.getCSS())
        };
        this.placeholderStyle = {
            ...(placeholder.rect.getCSS()),
            "transform": scaleText,
            "msTransform": scaleText,
            "WebkitTransform": scaleText,
            "OTransform": scaleText,
            "MozTransform": scaleText
        };
        if (calloutPlaceholder) {
            this.calloutPlaceholderStyle = {
                left: calloutPlaceholder.rect.x + "px",
                top: calloutPlaceholder.rect.y + "px"
            };
        }
        const { centerOnCursor } = this.state;
        if (centerOnCursor) {
            const centerOnCursorTask = this.tasks.getTask("CenterOnCursorTask");
            this.placeholderOffset = centerOnCursorTask.getPlaceholderOffset();
        }
    }
    ngOnDestroy() {
        // destroy timer
        if (this.timer) {
            clearTimeout(this.timer);
            this.timer = null;
        }
        // destroy observer
        this.observer.disconnect();
    }
}
BaseDiagramComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.2", ngImport: i0, type: BaseDiagramComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }, { token: i1.TaskManagerFactory }], target: i0.ɵɵFactoryTarget.Component });
BaseDiagramComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.2", type: BaseDiagramComponent, selector: "ng-component", inputs: { centerOnCursor: "centerOnCursor" }, viewQueries: [{ propertyName: "frameMousePanelRef", first: true, predicate: ["frameMousePanelRef"], descendants: true }, { propertyName: "framePlaceholderRef", first: true, predicate: ["framePlaceholderRef"], descendants: true }, { propertyName: "titlesMousePanelRef", first: true, predicate: ["titlesMousePanelRef"], descendants: true }, { propertyName: "titlesPlaceholderRef", first: true, predicate: ["titlesPlaceholderRef"], descendants: true }, { propertyName: "scrollPanelRef", first: true, predicate: ["scrollPanelRef"], descendants: true }, { propertyName: "mousePanelRef", first: true, predicate: ["mousePanelRef"], descendants: true }, { propertyName: "placeholderRef", first: true, predicate: ["placeholderRef"], descendants: true }, { propertyName: "calloutPlaceholderRef", first: true, predicate: ["calloutPlaceholderRef"], descendants: true }, { propertyName: "controlPanelRef", first: true, predicate: ["controlPanelRef"], descendants: true }], ngImport: i0, template: "<!-- root control panel -->\n<div #controlPanelRef\n  class=\"control-panel\"\n  [ngStyle]=\"controlPanelStyle\"\n  (keydown)=\"onKeyDown($event)\"\n  tabIndex=\"0\"\n>\n  <div *ngIf=\"framePlaceholder\"\n    #frameMousePanelRef\n    class=\"frame-mouse-panel\"\n    [ngStyle]=\"frameMousePanelStyle\"\n    (click)=\"onFrameClick($event)\"\n    (mousemove)=\"onFrameMouseMove($event)\"\n  >\n    <div #framePlaceholderRef\n      class=\"frame-placeholder\" \n      [ngStyle]=\"framePlaceholderStyle\"\n    >\n      <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: framePlaceholder}\"></ng-container>\n    </div>\n  </div>\n  <div *ngIf=\"titlesPlaceholder\"\n    #titlesMousePanelRef\n    class=\"titles-mouse-panel\"\n    [ngStyle]=\"titlesMousePanelStyle\"\n    (mousemove)=\"onFrameMouseMove($event)\"\n    (click)=\"onFrameClick($event)\"\n  >\n    <div #titlesPlaceholderRef\n      [ngStyle]=\"titlesPlaceholderStyle\"\n      class=\"titles-placeholder\"\n     >\n      <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: titlesPlaceholder}\"></ng-container>\n    </div>\n  </div>\n  <div\n    #scrollPanelRef\n    class=\"scroll-panel\"\n    [ngStyle]=\"scrollPanelStyle\"\n    (scroll)=\"onScroll($event)\"\n    [scrollLeft]=\"placeholderOffset ? placeholderOffset.x : undefined\"\n    [scrollTop]=\"placeholderOffset ? placeholderOffset.y : undefined\"\n  >\n    <div #mousePanelRef\n      class=\"mouse-panel\"\n      [ngStyle]=\"mousePanelStyle\"\n      (mousemove)=\"onMouseMove($event)\"\n      (click)=\"onClick($event)\"\n      (change)=\"onCheckboxChange($event)\"\n    >\n      <div #placeholderRef\n        class=\"placeholder\"\n        [ngStyle]=\"placeholderStyle\"\n      >\n        <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: placeholder}\"></ng-container>\n        <div *ngIf=\"calloutPlaceholder\"\n          #calloutPlaceholderRef\n          class=\"callout-placeholder\"\n          [ngStyle]=\"calloutPlaceholderStyle\"\n        >\n          <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: calloutPlaceholder}\"></ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!--Templates: -->\n<ng-template #layerTemplate let-placeholder>\n  <div *ngFor=\"let layer of placeholder.layers\" class=\"layer\">\n    <ng-container *ngIf=\"layer\">\n      <div *ngFor=\"let label of layer.labels\" class=\"label\" [ngStyle]= \"label.style\">\n        <rotated-text\n          [width]=\"label.width\"\n          [height]=\"label.height\"\n          [orientation]=\"label.orientation\"\n          [horizontalAlignment]=\"label.horizontalAlignment\"\n          [verticalAlignment]=\"label.verticalAlignment\"\n        >{{label.label}}</rotated-text>\n      </div>\n      <svg \n        *ngIf=\"layer.polylines.length > 0\"\n        attr.height.px=\"{{placeholder.size.height}}\"\n        attr.width.px=\"{{placeholder.size.width}}\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        [ngStyle]=\"{width: placeholder.size.width + 'px', height: placeholder.size.height + 'px'}\"\n      >\n        <path *ngFor=\"let path of layer.polylines\" [attr.d]=\"path.data\" [ngStyle]=\"path.style\"></path>\n      </svg>\n      <div *ngFor=\"let item of layer.items;\" class=\"template\" [ngStyle]=\"item.style\">\n        <ng-container [ngSwitch]=\"item.templateType\">\n          <ng-container *ngSwitchCase=\"'itemTemplate'\">\n            <bp-item [itemConfig]=\"item.context.context\" [itemTitleFirstFontColor]=\"item.context.itemTitleFirstFontColor\" [itemTitleSecondFontColor]=\"item.context.itemTitleSecondFontColor\"></bp-item>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'checkboxTemplate'\">\n            <bp-checkbox [id]=\"item.context.id\" [isSelected]=\"item.context.isSelected\" [label]=\"item.context.selectCheckBoxLabel\"></bp-checkbox>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'groupTitleTemplate'\">\n            <bp-group-title [options]=\"item.context\" [itemConfig]=\"item.context.context\" [width]=\"item.context.width\" [height]=\"item.context.height\"></bp-group-title>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'cursorTemplate'\">\n            <bp-cursor [templateConfig]=\"item.context.templateConfig\"></bp-cursor>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'highlightTemplate'\">\n            <bp-highlight [templateConfig]=\"item.context.templateConfig\"></bp-highlight>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'dotHighlightTemplate'\">\n            <bp-dot-highlight [templateConfig]=\"item.context.templateConfig\"></bp-dot-highlight>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'levelTitleTemplate'\">\n            <bp-level-title [options]=\"item.context\" [annotationConfig]=\"item.context.context\" [width]=\"item.context.width\" [height]=\"item.context.height\"></bp-level-title>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'levelBackgroundTemplate'\">\n            <bp-level-background [annotationConfig]=\"item.context.context\"></bp-level-background>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'labelAnnotationTemplate'\">\n            <div class=\"label-annotation\">{{item.context.context.title}}</div>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'annotationLabelTemplate'\">\n            <div class=\"label-annotation\">{{item.context.context.label}}</div>\n          </ng-container>\n          <ng-container *ngSwitchDefault>\n            <ng-container *ngTemplateOutlet=\"item.templateRef; context: item.context\"></ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n    </ng-container>\n  </div>\n</ng-template>\n", styles: [".control-panel{position:relative;overflow:hidden;top:0px;left:0px;width:100%;height:100%;padding:0;margin-bottom:0;margin-right:0}.frame-mouse-panel{position:absolute;overflow:hidden}.frame-placeholder{position:absolute;overflow:hidden;transform-origin:0 0}.titles-mouse-panel,.titles-placeholder{position:absolute;overflow:hidden}.scroll-panel{position:absolute;overflow:auto;-webkit-overflow-scrolling:touch}.mouse-panel{position:absolute;overflow:hidden}.placeholder{position:absolute;overflow:hidden;transform-origin:0 0}.callout-placeholder{position:absolute;overflow:visible}.layer{position:absolute;overflow:visible;left:0px;top:0px}.label{position:absolute;overflow:visible;font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-webkit-touch-callout:none;user-select:none;box-sizing:content-box}.template{position:absolute;overflow:visible;font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-webkit-touch-callout:none;user-select:none;box-sizing:content-box;padding:0;margin:0}.label-annotation{position:absolute;overflow:visible;font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-webkit-touch-callout:none;user-select:none;box-sizing:content-box;width:100%;text-align:center}\n"], components: [{ type: i2.RotatedText, selector: "rotated-text", inputs: ["width", "height", "orientation", "horizontalAlignment", "verticalAlignment"] }, { type: i3.ItemComponent, selector: "bp-item", inputs: ["itemTitleFirstFontColor", "itemTitleSecondFontColor", "itemConfig"] }, { type: i4.CheckboxComponent, selector: "bp-checkbox", inputs: ["id", "label", "isSelected"] }, { type: i5.GroupTitleComponent, selector: "bp-group-title", inputs: ["options", "itemConfig", "width", "height"] }, { type: i6.CursorComponent, selector: "bp-cursor", inputs: ["templateConfig"] }, { type: i7.HighlightComponent, selector: "bp-highlight", inputs: ["templateConfig"] }, { type: i8.DotHighlightComponent, selector: "bp-dot-highlight", inputs: ["templateConfig"] }, { type: i9.LevelTitleComponent, selector: "bp-level-title", inputs: ["options", "annotationConfig", "width", "height"] }, { type: i10.LevelBackgroundComponent, selector: "bp-level-background", inputs: ["annotationConfig"] }], directives: [{ type: i11.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i11.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i11.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i11.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i11.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { type: i11.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { type: i11.NgSwitchDefault, selector: "[ngSwitchDefault]" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.2", ngImport: i0, type: BaseDiagramComponent, decorators: [{
            type: Component,
            args: [{ template: "<!-- root control panel -->\n<div #controlPanelRef\n  class=\"control-panel\"\n  [ngStyle]=\"controlPanelStyle\"\n  (keydown)=\"onKeyDown($event)\"\n  tabIndex=\"0\"\n>\n  <div *ngIf=\"framePlaceholder\"\n    #frameMousePanelRef\n    class=\"frame-mouse-panel\"\n    [ngStyle]=\"frameMousePanelStyle\"\n    (click)=\"onFrameClick($event)\"\n    (mousemove)=\"onFrameMouseMove($event)\"\n  >\n    <div #framePlaceholderRef\n      class=\"frame-placeholder\" \n      [ngStyle]=\"framePlaceholderStyle\"\n    >\n      <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: framePlaceholder}\"></ng-container>\n    </div>\n  </div>\n  <div *ngIf=\"titlesPlaceholder\"\n    #titlesMousePanelRef\n    class=\"titles-mouse-panel\"\n    [ngStyle]=\"titlesMousePanelStyle\"\n    (mousemove)=\"onFrameMouseMove($event)\"\n    (click)=\"onFrameClick($event)\"\n  >\n    <div #titlesPlaceholderRef\n      [ngStyle]=\"titlesPlaceholderStyle\"\n      class=\"titles-placeholder\"\n     >\n      <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: titlesPlaceholder}\"></ng-container>\n    </div>\n  </div>\n  <div\n    #scrollPanelRef\n    class=\"scroll-panel\"\n    [ngStyle]=\"scrollPanelStyle\"\n    (scroll)=\"onScroll($event)\"\n    [scrollLeft]=\"placeholderOffset ? placeholderOffset.x : undefined\"\n    [scrollTop]=\"placeholderOffset ? placeholderOffset.y : undefined\"\n  >\n    <div #mousePanelRef\n      class=\"mouse-panel\"\n      [ngStyle]=\"mousePanelStyle\"\n      (mousemove)=\"onMouseMove($event)\"\n      (click)=\"onClick($event)\"\n      (change)=\"onCheckboxChange($event)\"\n    >\n      <div #placeholderRef\n        class=\"placeholder\"\n        [ngStyle]=\"placeholderStyle\"\n      >\n        <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: placeholder}\"></ng-container>\n        <div *ngIf=\"calloutPlaceholder\"\n          #calloutPlaceholderRef\n          class=\"callout-placeholder\"\n          [ngStyle]=\"calloutPlaceholderStyle\"\n        >\n          <ng-container *ngTemplateOutlet=\"layerTemplate; context: {$implicit: calloutPlaceholder}\"></ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!--Templates: -->\n<ng-template #layerTemplate let-placeholder>\n  <div *ngFor=\"let layer of placeholder.layers\" class=\"layer\">\n    <ng-container *ngIf=\"layer\">\n      <div *ngFor=\"let label of layer.labels\" class=\"label\" [ngStyle]= \"label.style\">\n        <rotated-text\n          [width]=\"label.width\"\n          [height]=\"label.height\"\n          [orientation]=\"label.orientation\"\n          [horizontalAlignment]=\"label.horizontalAlignment\"\n          [verticalAlignment]=\"label.verticalAlignment\"\n        >{{label.label}}</rotated-text>\n      </div>\n      <svg \n        *ngIf=\"layer.polylines.length > 0\"\n        attr.height.px=\"{{placeholder.size.height}}\"\n        attr.width.px=\"{{placeholder.size.width}}\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        [ngStyle]=\"{width: placeholder.size.width + 'px', height: placeholder.size.height + 'px'}\"\n      >\n        <path *ngFor=\"let path of layer.polylines\" [attr.d]=\"path.data\" [ngStyle]=\"path.style\"></path>\n      </svg>\n      <div *ngFor=\"let item of layer.items;\" class=\"template\" [ngStyle]=\"item.style\">\n        <ng-container [ngSwitch]=\"item.templateType\">\n          <ng-container *ngSwitchCase=\"'itemTemplate'\">\n            <bp-item [itemConfig]=\"item.context.context\" [itemTitleFirstFontColor]=\"item.context.itemTitleFirstFontColor\" [itemTitleSecondFontColor]=\"item.context.itemTitleSecondFontColor\"></bp-item>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'checkboxTemplate'\">\n            <bp-checkbox [id]=\"item.context.id\" [isSelected]=\"item.context.isSelected\" [label]=\"item.context.selectCheckBoxLabel\"></bp-checkbox>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'groupTitleTemplate'\">\n            <bp-group-title [options]=\"item.context\" [itemConfig]=\"item.context.context\" [width]=\"item.context.width\" [height]=\"item.context.height\"></bp-group-title>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'cursorTemplate'\">\n            <bp-cursor [templateConfig]=\"item.context.templateConfig\"></bp-cursor>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'highlightTemplate'\">\n            <bp-highlight [templateConfig]=\"item.context.templateConfig\"></bp-highlight>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'dotHighlightTemplate'\">\n            <bp-dot-highlight [templateConfig]=\"item.context.templateConfig\"></bp-dot-highlight>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'levelTitleTemplate'\">\n            <bp-level-title [options]=\"item.context\" [annotationConfig]=\"item.context.context\" [width]=\"item.context.width\" [height]=\"item.context.height\"></bp-level-title>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'levelBackgroundTemplate'\">\n            <bp-level-background [annotationConfig]=\"item.context.context\"></bp-level-background>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'labelAnnotationTemplate'\">\n            <div class=\"label-annotation\">{{item.context.context.title}}</div>\n          </ng-container>\n          <ng-container *ngSwitchCase=\"'annotationLabelTemplate'\">\n            <div class=\"label-annotation\">{{item.context.context.label}}</div>\n          </ng-container>\n          <ng-container *ngSwitchDefault>\n            <ng-container *ngTemplateOutlet=\"item.templateRef; context: item.context\"></ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n    </ng-container>\n  </div>\n</ng-template>\n", styles: [".control-panel{position:relative;overflow:hidden;top:0px;left:0px;width:100%;height:100%;padding:0;margin-bottom:0;margin-right:0}.frame-mouse-panel{position:absolute;overflow:hidden}.frame-placeholder{position:absolute;overflow:hidden;transform-origin:0 0}.titles-mouse-panel,.titles-placeholder{position:absolute;overflow:hidden}.scroll-panel{position:absolute;overflow:auto;-webkit-overflow-scrolling:touch}.mouse-panel{position:absolute;overflow:hidden}.placeholder{position:absolute;overflow:hidden;transform-origin:0 0}.callout-placeholder{position:absolute;overflow:visible}.layer{position:absolute;overflow:visible;left:0px;top:0px}.label{position:absolute;overflow:visible;font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-webkit-touch-callout:none;user-select:none;box-sizing:content-box}.template{position:absolute;overflow:visible;font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-webkit-touch-callout:none;user-select:none;box-sizing:content-box;padding:0;margin:0}.label-annotation{position:absolute;overflow:visible;font-family:Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-webkit-touch-callout:none;user-select:none;box-sizing:content-box;width:100%;text-align:center}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }, { type: i1.TaskManagerFactory }]; }, propDecorators: { frameMousePanelRef: [{
                type: ViewChild,
                args: ['frameMousePanelRef']
            }], framePlaceholderRef: [{
                type: ViewChild,
                args: ['framePlaceholderRef']
            }], titlesMousePanelRef: [{
                type: ViewChild,
                args: ['titlesMousePanelRef']
            }], titlesPlaceholderRef: [{
                type: ViewChild,
                args: ['titlesPlaceholderRef']
            }], scrollPanelRef: [{
                type: ViewChild,
                args: ['scrollPanelRef']
            }], mousePanelRef: [{
                type: ViewChild,
                args: ['mousePanelRef']
            }], placeholderRef: [{
                type: ViewChild,
                args: ['placeholderRef']
            }], calloutPlaceholderRef: [{
                type: ViewChild,
                args: ['calloutPlaceholderRef']
            }], controlPanelRef: [{
                type: ViewChild,
                args: ['controlPanelRef']
            }], centerOnCursor: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1kaWFncmFtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1iYXNpYy1wcmltaXRpdmVzL3NyYy9saWIvZGlhZ3JhbXMvYmFzZS1kaWFncmFtLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1iYXNpYy1wcmltaXRpdmVzL3NyYy9saWIvZGlhZ3JhbXMvYmFzZS1kaWFncmFtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUFjLEtBQUssRUFBNkIsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xILE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDM0MsT0FBTyxFQUFlLFFBQVEsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUNuRCxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDL0MsYUFBYTtBQUNiLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUV6RixPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLGVBQWUsRUFDZixnQkFBZ0IsRUFDaEIsY0FBYyxFQUNkLG9CQUFvQixFQUNwQixrQkFBa0IsRUFDbEIsaUJBQWlCLEVBQ2pCLFlBQVksRUFDWixZQUFZLEVBQ1osb0JBQW9CLEVBQ3BCLHVCQUF1QixFQUN2QixrQkFBa0IsRUFDbEIsdUJBQXVCLEVBQ3hCLE1BQU0sYUFBYSxDQUFDOzs7Ozs7Ozs7Ozs7O0FBR3JCLE1BQU0sYUFBYTtJQWNqQixZQUFZLFNBQWlDLEVBQUU7UUFiL0MsYUFBUSxHQUFZLEtBQUssQ0FBQztRQUMxQixnQkFBVyxHQUFTLElBQUksSUFBSSxFQUFFLENBQUM7UUFDL0IsVUFBSyxHQUFXLENBQUMsQ0FBQztRQUNsQix3QkFB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bGVtZW50UmVmLCBJbnB1dCwgTmdab25lLCBPbkRlc3Ryb3ksIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPcmllbnRhdGlvblR5cGUgfSBmcm9tICcuLi9lbnVtcyc7XG5pbXBvcnQgeyBQbGFjZWhvbGRlciwgR3JhcGhpY3MgfSBmcm9tICcuL2dyYXBoaWNzJztcbmltcG9ydCB7IFJlY3QsIFNpemUsIFBvaW50IH0gZnJvbSAnLi4vc3RydWN0cyc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBnZXRGaXhPZlBpeGVsQWxpZ25tZW50LCBnZXRJbm5lclNpemUsIGdldEVsZW1lbnRPZmZzZXQgfSBmcm9tICdiYXNpY3ByaW1pdGl2ZXMnO1xuaW1wb3J0IHsgVGFza01hbmFnZXJGYWN0b3J5IH0gZnJvbSAnLi90YXNrLW1hbmFnZXItZmFjdG9yeSc7XG5pbXBvcnQge1xuICBBbm5vdGF0aW9uTGFiZWxUZW1wbGF0ZSxcbiAgQnV0dG9uc1RlbXBsYXRlLFxuICBDaGVja0JveFRlbXBsYXRlLFxuICBDdXJzb3JUZW1wbGF0ZSxcbiAgRG90SGlnaGxpZ2h0VGVtcGxhdGUsXG4gIEdyb3VwVGl0bGVUZW1wbGF0ZSxcbiAgSGlnaGxpZ2h0VGVtcGxhdGUsXG4gIEl0ZW1UZW1wbGF0ZSxcbiAgVXNlclRlbXBsYXRlLFxuICBDdXN0b21SZW5kZXJUZW1wbGF0ZSxcbiAgTGFiZWxBbm5vdGF0aW9uVGVtcGxhdGUsXG4gIExldmVsVGl0bGVUZW1wbGF0ZSxcbiAgTGV2ZWxCYWNrZ3JvdW5kVGVtcGxhdGVcbn0gZnJvbSAnLi90ZW1wbGF0ZXMnO1xuaW1wb3J0IHsgVGVtcGxhdGVDb25maWcgfSBmcm9tICcuLi9jb25maWdzL3RlbXBsYXRlLWNvbmZpZyc7XG5cbmNsYXNzIExheW91dE9wdGlvbnMge1xuICBhdXRvU2l6ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBjb250cm9sU2l6ZTogU2l6ZSA9IG5ldyBTaXplKCk7XG4gIHNjYWxlOiBudW1iZXIgPSAxO1xuICBmcmFtZU1vdXNlUGFuZWxSZWN0OiBSZWN0ID0gbmV3IFJlY3QoKTtcbiAgZnJhbWVQbGFjZWhvbGRlclNpemU6IFNpemUgPSBuZXcgU2l6ZSgpO1xuXG4gIHRpdGxlc01vdXNlUGFuZWxSZWN0OiBSZWN0ID0gbmV3IFJlY3QoKTtcbiAgdGl0bGVzUGxhY2Vob2xkZXJTaXplOiBTaXplID0gbmV3IFNpemUoKTtcblxuICBzY3JvbGxQYW5lbFJlY3Q6IFJlY3QgPSBuZXcgUmVjdCgpO1xuICBtb3VzZVBhbmVsU2l6ZTogU2l6ZSA9IG5ldyBTaXplKCk7XG4gIHBsYWNlaG9sZGVyU2l6ZTogU2l6ZSA9IG5ldyBTaXplKCk7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPExheW91dE9wdGlvbnM+ID0ge30pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvbmZpZyk7XG4gIH1cbn1cblxuY2xhc3MgQmFzZURpYWdyYW1TdGF0ZSB7XG4gIGNvbmZpZzogYW55O1xuICB2aWV3cG9ydFNpemU6IFNpemUgPSBuZXcgU2l6ZSgwLCAwKTtcbiAgY29udGVudFBvc2l0aW9uOiBQb2ludCA9IG5ldyBQb2ludCgwLCAwKTtcbiAgY2VudGVyT25DdXJzb3I6IGJvb2xlYW4gPSB0cnVlO1xuICBoaWdobGlnaHRJdGVtOiBudW1iZXIgfCBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgY3Vyc29ySXRlbTogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHNlbGVjdGVkSXRlbXM6IEFycmF5PHN0cmluZ3xudW1iZXI+ID0gW107XG59O1xuXG5AQ29tcG9uZW50KHtcbiAgdGVtcGxhdGVVcmw6ICcuL2Jhc2UtZGlhZ3JhbS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2Jhc2UtZGlhZ3JhbS5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgQmFzZURpYWdyYW1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICB2YXIgb25TaXplQ2hhbmdlZCA9ICB0aGlzLm9uU2l6ZUNoYW5nZWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHRoaXMuem9uZS5ydW4oKCkgPT4gb25TaXplQ2hhbmdlZCgpKSk7XG4gICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuY29udHJvbFBhbmVsUmVmIS5uYXRpdmVFbGVtZW50KTtcblxuICAgIHRoaXMuZml4UGl4ZWxBbGlnbm1lbnQoKTtcbiAgfVxuXG4gIEBWaWV3Q2hpbGQoJ2ZyYW1lTW91c2VQYW5lbFJlZicpIGZyYW1lTW91c2VQYW5lbFJlZjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD4gfCB1bmRlZmluZWQ7ICBcbiAgQFZpZXdDaGlsZCgnZnJhbWVQbGFjZWhvbGRlclJlZicpIGZyYW1lUGxhY2Vob2xkZXJSZWY6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+IHwgdW5kZWZpbmVkOyAgXG4gIEBWaWV3Q2hpbGQoJ3RpdGxlc01vdXNlUGFuZWxSZWYnKSB0aXRsZXNNb3VzZVBhbmVsUmVmOiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PiB8IHVuZGVmaW5lZDtcbiAgQFZpZXdDaGlsZCgndGl0bGVzUGxhY2Vob2xkZXJSZWYnKSB0aXRsZXNQbGFjZWhvbGRlclJlZjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD4gfCB1bmRlZmluZWQ7XG4gIEBWaWV3Q2hpbGQoJ3Njcm9sbFBhbmVsUmVmJykgc2Nyb2xsUGFuZWxSZWY6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+IHwgdW5kZWZpbmVkO1xuICBAVmlld0NoaWxkKCdtb3VzZVBhbmVsUmVmJykgbW91c2VQYW5lbFJlZjogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD4gfCB1bmRlZmluZWQ7XG4gIEBWaWV3Q2hpbGQoJ3BsYWNlaG9sZGVyUmVmJykgcGxhY2Vob2xkZXJSZWY6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+IHwgdW5kZWZpbmVkO1xuICBAVmlld0NoaWxkKCdjYWxsb3V0UGxhY2Vob2xkZXJSZWYnKSBjYWxsb3V0UGxhY2Vob2xkZXJSZWY6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+IHwgdW5kZWZpbmVkO1xuICBAVmlld0NoaWxkKCdjb250cm9sUGFuZWxSZWYnKSBjb250cm9sUGFuZWxSZWY6IEVsZW1lbnRSZWY8SFRNTERpdkVsZW1lbnQ+IHwgdW5kZWZpbmVkO1xuICBcbiAgQElucHV0KCkgY2VudGVyT25DdXJzb3I6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIF9vbkhpZ2hsaWdodENoYW5naW5nIChldmVudDogRXZlbnQsIGl0ZW1JZDogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCwgbmV3SXRlbUlkOiBudW1iZXIgfCBzdHJpbmcgfCBudWxsKTogYW55IHt9O1xuICBfb25IaWdobGlnaHRDaGFuZ2VkIChldmVudEFyZ3M6IGFueSkge307XG4gIF9vbkN1cnNvckNoYW5naW5nIChldmVudDogRXZlbnQsIGl0ZW1JZDogbnVtYmVyIHwgc3RyaW5nIHwgbnVsbCwgbmV3SXRlbUlkOiBudW1iZXIgfCBzdHJpbmcgfCBudWxsKTogYW55IHt9O1xuICBfb25DdXJzb3JDaGFuZ2VkIChldmVudEFyZ3M6IGFueSkge307XG4gIF9vblNlbGVjdGlvbkNoYW5naW5nIChldmVudDogRXZlbnQsIHNlbGVjdGVkSXRlbXM6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBuZXdTZWxlY3RlZEl0ZW1zOiBBcnJheTxzdHJpbmd8bnVtYmVyPik6IGFueSB7fTtcbiAgX29uU2VsZWN0aW9uQ2hhbmdlZCAoZXZlbnRBcmdzOiBhbnkpIHt9O1xuXG4gIHByaXZhdGUgdGFza01hbmFnZXJGYWN0b3J5OiBUYXNrTWFuYWdlckZhY3Rvcnk7XG4gIHByaXZhdGUgdGFza3M6IGFueTtcbiAgcHJvdGVjdGVkIHN0YXRlOiBCYXNlRGlhZ3JhbVN0YXRlID0gbmV3IEJhc2VEaWFncmFtU3RhdGUoKTtcbiAgcHJpdmF0ZSBncmFwaGljczogR3JhcGhpY3M7XG4gIHByaXZhdGUgbGF5b3V0T3B0aW9uczogTGF5b3V0T3B0aW9ucyA9IG5ldyBMYXlvdXRPcHRpb25zKCk7XG4gIHByaXZhdGUgdGltZXI6IGFueSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9ic2VydmVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBob3N0OiBFbGVtZW50UmVmLCBwcml2YXRlIHpvbmU6IE5nWm9uZSwgdGFza01hbmFnZXJGYWN0b3J5OiBUYXNrTWFuYWdlckZhY3RvcnkpIHsgXG4gICAgdGhpcy50YXNrTWFuYWdlckZhY3RvcnkgPSB0YXNrTWFuYWdlckZhY3Rvcnk7XG4gICAgdGhpcy5ncmFwaGljcyA9IG5ldyBHcmFwaGljcyhuZXcgU2l6ZSgwLDApKTtcblxuICAgIHZhciB0ZW1wbGF0ZXMgPSB7XG4gICAgICBBbm5vdGF0aW9uTGFiZWxUZW1wbGF0ZSxcbiAgICAgIEJ1dHRvbnNUZW1wbGF0ZSxcbiAgICAgIENoZWNrQm94VGVtcGxhdGUsXG4gICAgICBDdXJzb3JUZW1wbGF0ZSxcbiAgICAgIERvdEhpZ2hsaWdodFRlbXBsYXRlLFxuICAgICAgR3JvdXBUaXRsZVRlbXBsYXRlLFxuICAgICAgSGlnaGxpZ2h0VGVtcGxhdGUsXG4gICAgICBJdGVtVGVtcGxhdGUsXG4gICAgICBVc2VyVGVtcGxhdGUsXG4gICAgICBDdXN0b21SZW5kZXJUZW1wbGF0ZSxcbiAgICAgIExhYmVsQW5ub3RhdGlvblRlbXBsYXRlLFxuICAgICAgTGV2ZWxUaXRsZVRlbXBsYXRlLFxuICAgICAgTGV2ZWxCYWNrZ3JvdW5kVGVtcGxhdGVcbiAgICB9XG4gICAgdGhpcy50YXNrcyA9IHRhc2tNYW5hZ2VyRmFjdG9yeS5mYWN0b3J5KHRoaXMuZ2V0T3B0aW9ucy5iaW5kKHRoaXMpLCB0aGlzLmdldEdyYXBoaWNzLmJpbmQodGhpcyksIHRoaXMuZ2V0TGF5b3V0LmJpbmQodGhpcyksIHRoaXMuc2V0TGF5b3V0LmJpbmQodGhpcyksIHRlbXBsYXRlcyk7XG5cbiAgICB0aGlzLmxheW91dE9wdGlvbnMgPSBuZXcgTGF5b3V0T3B0aW9ucygpO1xuICB9XG5cbiAgb25JdGVtUmVuZGVyKGRhdGE6IGFueSkge1xuICAgIGNvbnN0IHsgdGVtcGxhdGVOYW1lIH0gPSBkYXRhO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZXNIYXNoW3RlbXBsYXRlTmFtZV07XG4gICAgcmV0dXJuIHRlbXBsYXRlLml0ZW1UZW1wbGF0ZTtcbiAgfVxuXG4gIG9uSGlnaGxpZ2h0UmVuZGVyKGRhdGE6IGFueSkge1xuICAgIGNvbnN0IHsgdGVtcGxhdGVOYW1lIH0gPSBkYXRhO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZXNIYXNoW3RlbXBsYXRlTmFtZV07XG4gICAgcmV0dXJuIHRlbXBsYXRlLmhpZ2hsaWdodFRlbXBsYXRlO1xuICB9XG5cbiAgb25DdXJzb3JSZW5kZXIoZGF0YTogYW55KSB7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZU5hbWUgfSA9IGRhdGE7XG4gICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlc0hhc2hbdGVtcGxhdGVOYW1lXTtcbiAgICByZXR1cm4gdGVtcGxhdGUuY3Vyc29yVGVtcGxhdGU7XG4gIH1cblxuICB0ZW1wbGF0ZXNIYXNoOiB7W2lkOiBzdHJpbmddOlRlbXBsYXRlQ29uZmlnfSA9IHt9O1xuICBnZXRPcHRpb25zKCkge1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHRlbXBsYXRlczogQXJyYXk8VGVtcGxhdGVDb25maWc+ID0gY29uZmlnLnRlbXBsYXRlcyB8fCBbXTtcblxuICAgIHRoaXMudGVtcGxhdGVzSGFzaCA9IHt9O1xuICAgIHRlbXBsYXRlcy5mb3JFYWNoKHRlbXBsYXRlID0+IHtcbiAgICAgIHRoaXMudGVtcGxhdGVzSGFzaFt0ZW1wbGF0ZS5uYW1lIV0gPSB0ZW1wbGF0ZTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGVmZmVjdGl2ZVRlbXBsYXRlcyA9IHRlbXBsYXRlcy5tYXAodGVtcGxhdGUgPT4ge1xuICAgICAgY29uc3QgeyBidXR0b25zVGVtcGxhdGUgfSA9IHRlbXBsYXRlO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udGVtcGxhdGUsXG4gICAgICAgIG9uQnV0dG9uc1JlbmRlcjogIWJ1dHRvbnNUZW1wbGF0ZSA/IG51bGwgOiAoKSA9PiBidXR0b25zVGVtcGxhdGVcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCB7IGhpZ2hsaWdodEl0ZW0sIGN1cnNvckl0ZW0sIHNlbGVjdGVkSXRlbXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmNvbmZpZyxcbiAgICAgIHRlbXBsYXRlczogZWZmZWN0aXZlVGVtcGxhdGVzLFxuICAgICAgaGlnaGxpZ2h0SXRlbSxcbiAgICAgIGN1cnNvckl0ZW0sXG4gICAgICBzZWxlY3RlZEl0ZW1zLFxuICAgICAgb25JdGVtUmVuZGVyOiB0aGlzLm9uSXRlbVJlbmRlci5iaW5kKHRoaXMpLFxuICAgICAgb25DdXJzb3JSZW5kZXI6IHRoaXMub25DdXJzb3JSZW5kZXIuYmluZCh0aGlzKSxcbiAgICAgIG9uSGlnaGxpZ2h0UmVuZGVyOiB0aGlzLm9uSGlnaGxpZ2h0UmVuZGVyLmJpbmQodGhpcyksXG4gICAgICBvbkdyb3VwVGl0bGVSZW5kZXI6ICFjb25maWcuZ3JvdXBUaXRsZVRlbXBsYXRlID8gbnVsbCA6ICgpID0+IGNvbmZpZy5ncm91cFRpdGxlVGVtcGxhdGUsXG4gICAgICBvbkxldmVsQmFja2dyb3VuZFJlbmRlcjogIWNvbmZpZy5sZXZlbEJhY2tncm91bmRUZW1wbGF0ZSA/IG51bGwgOiAoKSA9PiBjb25maWcubGV2ZWxCYWNrZ3JvdW5kVGVtcGxhdGUsXG4gICAgICBvbkxldmVsVGl0bGVSZW5kZXI6ICFjb25maWcubGV2ZWxUaXRsZVRlbXBsYXRlID8gbnVsbCA6ICgpID0+IGNvbmZpZy5sZXZlbFRpdGxlVGVtcGxhdGUsXG4gICAgICBvbkJ1dHRvbnNSZW5kZXI6ICFjb25maWcuYnV0dG9uc1RlbXBsYXRlID8gbnVsbCA6ICgpID0+IGNvbmZpZy5idXR0b25zVGVtcGxhdGVcbiAgICB9O1xuICB9XG5cbiAgZ2V0R3JhcGhpY3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ3JhcGhpY3M7XG4gIH1cblxuICBnZXRMYXlvdXQoKSB7XG4gICAgdmFyIGNlbnRlck9uQ3Vyc29yID0gdGhpcy5zdGF0ZS5jZW50ZXJPbkN1cnNvcjtcbiAgICB2YXIgdmlld3BvcnRTaXplID0gdGhpcy5zdGF0ZS52aWV3cG9ydFNpemU7XG4gICAgdmFyIGNvbnRlbnRQb3NpdGlvbiA9IHRoaXMuc3RhdGUuY29udGVudFBvc2l0aW9uO1xuICAgIC8vIHZhciB7IGNlbnRlck9uQ3Vyc29yLCB2aWV3cG9ydFNpemUsIGNvbnRlbnRQb3NpdGlvbiB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4ge1xuICAgICAgZm9yY2VDZW50ZXJPbkN1cnNvcjogY2VudGVyT25DdXJzb3IsXG4gICAgICBzY3JvbGxQYW5lbFNpemU6IG5ldyBTaXplKHZpZXdwb3J0U2l6ZS53aWR0aCwgdmlld3BvcnRTaXplLmhlaWdodCksXG4gICAgICBwbGFjZWhvbGRlck9mZnNldDogbmV3IFBvaW50KGNvbnRlbnRQb3NpdGlvbi54LCBjb250ZW50UG9zaXRpb24ueSlcbiAgICB9XG4gIH1cblxuICBzZXRMYXlvdXQobGF5b3V0T3B0aW9uczogYW55KSB7XG4gICAgY29uc3QgeyBcbiAgICAgICAgYXV0b1NpemUsIC8vIHJlc2l6ZSBjb250cm9sIGlmIHRydWVcbiAgICAgICAgY29udHJvbFNpemUsIC8vIFNldHMgY29udHJvbCBTaXplIGluIGF1dG8gc2NhbGUgbW9kZVxuICAgICAgICBzY2FsZSwgLy8gc2NhbGUgaXMgbmVlZGVkIGZvciBzY2FsZSB0cmFuc2Zvcm0gQ1NTIGNyZWF0aW9uXG4gICAgICAgIGZyYW1lTW91c2VQYW5lbFJlY3QsXG4gICAgICAgIGZyYW1lUGxhY2Vob2xkZXJTaXplLCAvLyB0aGUgZnJhbWUgY29udGVudCBzaXplIGJlZm9yZSBDU1MgU2NhbGUgVHJhbnNmb3JtIGFwcGxpZWRcbiAgICAgICAgdGl0bGVzTW91c2VQYW5lbFJlY3QsXG4gICAgICAgIHRpdGxlc1BsYWNlaG9sZGVyU2l6ZSwgLy8gVGl0bGVzIHNpemUgYmVmb3JlIENTUyBTY2FsZSBUcmFuc2Zvcm0gYXBwbGllZFxuICAgICAgICBzY3JvbGxQYW5lbFJlY3QsXG4gICAgICAgIG1vdXNlUGFuZWxTaXplLCAvLyBDb250ZW50IG1vdXNlIHBhbmVsIHNpemVcbiAgICAgICAgcGxhY2Vob2xkZXJTaXplIC8vIENvbnRlbnQgc2l6ZSBiZWZvcmUgQ1NTIFNjYWxlIFRyYW5zZm9ybSBhcHBsaWVkXG4gICAgfSA9IGxheW91dE9wdGlvbnM7XG5cbiAgICB0aGlzLmxheW91dE9wdGlvbnMgPSBuZXcgTGF5b3V0T3B0aW9ucyh7XG4gICAgICBhdXRvU2l6ZSxcbiAgICAgIGNvbnRyb2xTaXplOiBuZXcgU2l6ZShjb250cm9sU2l6ZS53aWR0aCwgY29udHJvbFNpemUuaGVpZ2h0KSxcbiAgICAgIHNjYWxlLFxuICAgICAgZnJhbWVNb3VzZVBhbmVsUmVjdDogbmV3IFJlY3QoZnJhbWVNb3VzZVBhbmVsUmVjdC54LCBmcmFtZU1vdXNlUGFuZWxSZWN0LnksIGZyYW1lTW91c2VQYW5lbFJlY3Qud2lkdGgsIGZyYW1lTW91c2VQYW5lbFJlY3QuaGVpZ2h0KSxcbiAgICAgIGZyYW1lUGxhY2Vob2xkZXJTaXplOiBuZXcgU2l6ZShmcmFtZVBsYWNlaG9sZGVyU2l6ZS53aWR0aCwgZnJhbWVQbGFjZWhvbGRlclNpemUuaGVpZ2h0KSxcblxuICAgICAgdGl0bGVzTW91c2VQYW5lbFJlY3Q6IG5ldyBSZWN0KHRpdGxlc01vdXNlUGFuZWxSZWN0LngsIHRpdGxlc01vdXNlUGFuZWxSZWN0LnksIHRpdGxlc01vdXNlUGFuZWxSZWN0LndpZHRoLCB0aXRsZXNNb3VzZVBhbmVsUmVjdC5oZWlnaHQpLFxuICAgICAgdGl0bGVzUGxhY2Vob2xkZXJTaXplOiBuZXcgU2l6ZSh0aXRsZXNQbGFjZWhvbGRlclNpemUud2lkdGgsIHRpdGxlc1BsYWNlaG9sZGVyU2l6ZS5oZWlnaHQpLFxuXG4gICAgICBzY3JvbGxQYW5lbFJlY3Q6IG5ldyBSZWN0KHNjcm9sbFBhbmVsUmVjdC54LCBzY3JvbGxQYW5lbFJlY3QueSwgc2Nyb2xsUGFuZWxSZWN0LndpZHRoLCBzY3JvbGxQYW5lbFJlY3QuaGVpZ2h0KSxcbiAgICAgIG1vdXNlUGFuZWxTaXplOiBuZXcgU2l6ZShtb3VzZVBhbmVsU2l6ZS53aWR0aCwgbW91c2VQYW5lbFNpemUuaGVpZ2h0KSxcbiAgICAgIHBsYWNlaG9sZGVyU2l6ZTogbmV3IFNpemUocGxhY2Vob2xkZXJTaXplLndpZHRoLCBwbGFjZWhvbGRlclNpemUuaGVpZ2h0KVxuICAgIH0pO1xuICB9XG5cbiAgZml4UGl4ZWxBbGlnbm1lbnQoKSB7XG4gICAgY29uc3QgeyBuYXRpdmVFbGVtZW50IH0gPSB0aGlzLmNvbnRyb2xQYW5lbFJlZiE7XG4gICAgdmFyIHBpeGVsQWxpZ25tZW50Rml4ID0gZ2V0Rml4T2ZQaXhlbEFsaWdubWVudChuYXRpdmVFbGVtZW50KTtcbiAgICBuYXRpdmVFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBwaXhlbEFsaWdubWVudEZpeC53aWR0aCArIFwicHhcIjtcbiAgICBuYXRpdmVFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IHBpeGVsQWxpZ25tZW50Rml4LmhlaWdodCArIFwicHhcIjtcbiAgfVxuXG4gIG9uU2l6ZUNoYW5nZWQoKSB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBnZXRJbm5lclNpemUodGhpcy5jb250cm9sUGFuZWxSZWYhLm5hdGl2ZUVsZW1lbnQpXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2aWV3cG9ydFNpemU6IG5ldyBTaXplKHdpZHRoLCBoZWlnaHQpLFxuICAgICAgY2VudGVyT25DdXJzb3I6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIG9uU2Nyb2xsKGV2ZW50OiBFdmVudCkge1xuICAgIGlmICh0aGlzLnRpbWVyID09IG51bGwpIHtcbiAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLm9uUmVmcmVzaFZpZXdwb3J0LmJpbmQodGhpcyksIDEwMCk7XG4gICAgfVxuICB9XG5cbiAgb25SZWZyZXNoVmlld3BvcnQoKSB7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVyISk7XG4gICAgdGhpcy50aW1lciA9IG51bGw7XG5cbiAgICBjb25zdCB7IHNjcm9sbFRvcCwgc2Nyb2xsTGVmdCB9ID0gdGhpcy5zY3JvbGxQYW5lbFJlZiEubmF0aXZlRWxlbWVudDtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGNvbnRlbnRQb3NpdGlvbjogbmV3IFBvaW50KE1hdGguZmxvb3Ioc2Nyb2xsTGVmdCksIE1hdGguZmxvb3Ioc2Nyb2xsVG9wKSksXG4gICAgICBjZW50ZXJPbkN1cnNvcjogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIG9uRnJhbWVNb3VzZU1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtjb25zdCBwbGFjZWhvbGRlck9mZnNldCA9IGdldEVsZW1lbnRPZmZzZXQodGhpcy5mcmFtZU1vdXNlUGFuZWxSZWYhLm5hdGl2ZUVsZW1lbnQpLFxuICAgICAgeCA9IGV2ZW50LnBhZ2VYIC0gcGxhY2Vob2xkZXJPZmZzZXQubGVmdCxcbiAgICAgIHkgPSBldmVudC5wYWdlWSAtIHBsYWNlaG9sZGVyT2Zmc2V0LnRvcCxcbiAgICAgIHByb2plY3RJdGVtc1RvRnJhbWVUYXNrID0gdGhpcy50YXNrcy5nZXRUYXNrKFwiUHJvamVjdEl0ZW1zVG9GcmFtZVRhc2tcIiksXG4gICAgICBoaWdobGlnaHRJdGVtT3B0aW9uVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIkhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrXCIpO1xuXG4gICAgaWYgKGhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrLmhhc0hpZ2hsaWdodEVuYWJsZWQoKSkge1xuICAgICAgY29uc3QgaXRlbUlkID0gcHJvamVjdEl0ZW1zVG9GcmFtZVRhc2suZ2V0VHJlZUl0ZW1Gb3JNb3VzZVBvc2l0aW9uKHgsIHksIGhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrLmdldEdyYXZpdHlSYWRpdXMoKSk7XG4gICAgICB0aGlzLnNldEhpZ2hsaWdodEl0ZW0oZXZlbnQsIGl0ZW1JZCk7XG4gICAgfVxuICB9XG5cbiAgb25GcmFtZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJPZmZzZXQgPSBnZXRFbGVtZW50T2Zmc2V0KHRoaXMuZnJhbWVNb3VzZVBhbmVsUmVmIS5uYXRpdmVFbGVtZW50KSxcbiAgICAgIHggPSBldmVudC5wYWdlWCAtIHBsYWNlaG9sZGVyT2Zmc2V0LmxlZnQsXG4gICAgICB5ID0gZXZlbnQucGFnZVkgLSBwbGFjZWhvbGRlck9mZnNldC50b3AsXG4gICAgICBwcm9qZWN0SXRlbXNUb0ZyYW1lVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIlByb2plY3RJdGVtc1RvRnJhbWVUYXNrXCIpLFxuICAgICAgY3Vyc29ySXRlbU9wdGlvblRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soXCJDdXJzb3JJdGVtT3B0aW9uVGFza1wiKSxcbiAgICAgIGhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrID0gdGhpcy50YXNrcy5nZXRUYXNrKFwiSGlnaGxpZ2h0SXRlbU9wdGlvblRhc2tcIiksXG4gICAgICBuZXdDdXJzb3JJdGVtSWQgPSBwcm9qZWN0SXRlbXNUb0ZyYW1lVGFzay5nZXRUcmVlSXRlbUZvck1vdXNlUG9zaXRpb24oeCwgeSwgaGlnaGxpZ2h0SXRlbU9wdGlvblRhc2suZ2V0R3Jhdml0eVJhZGl1cygpKTtcbiAgICBpZiAobmV3Q3Vyc29ySXRlbUlkICE9PSBudWxsKSB7XG4gICAgICBpZiAoY3Vyc29ySXRlbU9wdGlvblRhc2suaGFzQ3Vyc29yRW5hYmxlZCgpKSB7XG4gICAgICAgIHRoaXMuc2V0Q3Vyc29ySXRlbShldmVudCwgbmV3Q3Vyc29ySXRlbUlkKTtcbiAgICAgICAgdGhpcy5jb250cm9sUGFuZWxSZWYhLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCkge1xuICAgIGNvbnN0IHBsYWNlaG9sZGVyT2Zmc2V0ID0gZ2V0RWxlbWVudE9mZnNldCh0aGlzLm1vdXNlUGFuZWxSZWYhLm5hdGl2ZUVsZW1lbnQpLFxuICAgICAgeCA9IGV2ZW50LnBhZ2VYIC0gcGxhY2Vob2xkZXJPZmZzZXQubGVmdCxcbiAgICAgIHkgPSBldmVudC5wYWdlWSAtIHBsYWNlaG9sZGVyT2Zmc2V0LnRvcCxcbiAgICAgIGNyZWF0ZVRyYW5zZm9ybVRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soXCJDcmVhdGVUcmFuc2Zvcm1UYXNrXCIpLFxuICAgICAgaGlnaGxpZ2h0SXRlbU9wdGlvblRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soXCJIaWdobGlnaHRJdGVtT3B0aW9uVGFza1wiKTtcblxuICAgIGlmIChoaWdobGlnaHRJdGVtT3B0aW9uVGFzay5oYXNIaWdobGlnaHRFbmFibGVkKCkpIHtcbiAgICAgIGNvbnN0IGl0ZW1JZCA9IGNyZWF0ZVRyYW5zZm9ybVRhc2suZ2V0VHJlZUl0ZW1Gb3JNb3VzZVBvc2l0aW9uKHgsIHksIGhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrLmdldEdyYXZpdHlSYWRpdXMoKSk7XG4gICAgICB0aGlzLnNldEhpZ2hsaWdodEl0ZW0oZXZlbnQsIGl0ZW1JZCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0RXZlbnRBcmdzKG9sZFRyZWVJdGVtSWQ6IHN0cmluZyB8IG51bWJlciB8IG51bGwsIG5ld1RyZWVJdGVtSWQ6IHN0cmluZyB8IG51bWJlciB8IG51bGwsIG5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsKSB7XG4gICAgdmFyIHJlc3VsdDogYW55ID0ge30sXG4gICAgICBjb21iaW5lZENvbnRleHRzVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIkNvbWJpbmVkQ29udGV4dHNUYXNrXCIpLFxuICAgICAgYWxpZ25EaWFncmFtVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIkFsaWduRGlhZ3JhbVRhc2tcIiksXG4gICAgICBvbGRJdGVtQ29uZmlnID0gY29tYmluZWRDb250ZXh0c1Rhc2suZ2V0Q29uZmlnKG9sZFRyZWVJdGVtSWQpLFxuICAgICAgbmV3SXRlbUNvbmZpZyA9IGNvbWJpbmVkQ29udGV4dHNUYXNrLmdldENvbmZpZyhuZXdUcmVlSXRlbUlkKSxcbiAgICAgIGl0ZW1Qb3NpdGlvbixcbiAgICAgIG9mZnNldCxcbiAgICAgIHBhbmVsT2Zmc2V0O1xuXG4gICAgaWYgKG9sZEl0ZW1Db25maWcgJiYgb2xkSXRlbUNvbmZpZy5pZCAhPSBudWxsKSB7XG4gICAgICByZXN1bHQub2xkQ29udGV4dCA9IG9sZEl0ZW1Db25maWc7XG4gICAgfVxuXG4gICAgaWYgKG5ld0l0ZW1Db25maWcgJiYgbmV3SXRlbUNvbmZpZy5pZCAhPSBudWxsKSB7XG4gICAgICByZXN1bHQuY29udGV4dCA9IG5ld0l0ZW1Db25maWc7XG5cbiAgICAgIGlmIChuZXdJdGVtQ29uZmlnLnBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICByZXN1bHQucGFyZW50SXRlbSA9IGNvbWJpbmVkQ29udGV4dHNUYXNrLmdldENvbmZpZyhuZXdJdGVtQ29uZmlnLnBhcmVudCk7XG4gICAgICB9XG5cbiAgICAgIHBhbmVsT2Zmc2V0ID0gZ2V0RWxlbWVudE9mZnNldCh0aGlzLm1vdXNlUGFuZWxSZWYhLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgb2Zmc2V0ID0gZ2V0RWxlbWVudE9mZnNldCh0aGlzLnNjcm9sbFBhbmVsUmVmIS5uYXRpdmVFbGVtZW50KTtcbiAgICAgIGl0ZW1Qb3NpdGlvbiA9IGFsaWduRGlhZ3JhbVRhc2suZ2V0SXRlbVBvc2l0aW9uKG5ld1RyZWVJdGVtSWQpO1xuICAgICAgcmVzdWx0LnBvc2l0aW9uID0gbmV3IFJlY3QoaXRlbVBvc2l0aW9uLmFjdHVhbFBvc2l0aW9uKVxuICAgICAgICAudHJhbnNsYXRlKHBhbmVsT2Zmc2V0LmxlZnQsIHBhbmVsT2Zmc2V0LnRvcClcbiAgICAgICAgLnRyYW5zbGF0ZSgtb2Zmc2V0LmxlZnQsIC1vZmZzZXQudG9wKTtcbiAgICB9XG5cbiAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICByZXN1bHQubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHNldEhpZ2hsaWdodEl0ZW0oZXZlbnQ6IGFueSwgbmV3SGlnaGxpZ2h0SXRlbUlkOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsKSB7XG4gICAgbGV0IGV2ZW50QXJncywgY2FuY2VsID0gZmFsc2U7XG4gICAgY29uc3QgeyBoaWdobGlnaHRJdGVtIH0gPSB0aGlzLnN0YXRlO1xuICAgIGlmIChuZXdIaWdobGlnaHRJdGVtSWQgIT09IGhpZ2hsaWdodEl0ZW0pIHtcbiAgICAgIGV2ZW50QXJncyA9IHRoaXMuX29uSGlnaGxpZ2h0Q2hhbmdpbmcoZXZlbnQsIGhpZ2hsaWdodEl0ZW0sIG5ld0hpZ2hsaWdodEl0ZW1JZCk7XG4gICAgICBpZiAoIWV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaGlnaGxpZ2h0SXRlbTogbmV3SGlnaGxpZ2h0SXRlbUlkXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9vbkhpZ2hsaWdodENoYW5nZWQoZXZlbnRBcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRDdXJzb3JJdGVtKGV2ZW50OiBhbnksIG5ld0N1cnNvckl0ZW1JZDogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCkge1xuICAgIGxldCBldmVudEFyZ3MsIGNhbmNlbCA9IGZhbHNlO1xuICAgIGNvbnN0IHsgY3Vyc29ySXRlbSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAobmV3Q3Vyc29ySXRlbUlkICE9PSBjdXJzb3JJdGVtKSB7XG4gICAgICBldmVudEFyZ3MgPSB0aGlzLl9vbkN1cnNvckNoYW5naW5nKGV2ZW50LCBjdXJzb3JJdGVtLCBuZXdDdXJzb3JJdGVtSWQpO1xuICAgICAgaWYgKCFldmVudEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGN1cnNvckl0ZW06IG5ld0N1cnNvckl0ZW1JZCxcbiAgICAgICAgICBjZW50ZXJPbkN1cnNvcjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fb25DdXJzb3JDaGFuZ2VkKGV2ZW50QXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25DbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIHZhciBwbGFjZWhvbGRlck9mZnNldCA9IGdldEVsZW1lbnRPZmZzZXQodGhpcy5tb3VzZVBhbmVsUmVmIS5uYXRpdmVFbGVtZW50KSxcbiAgICAgIHggPSBldmVudC5wYWdlWCAtIHBsYWNlaG9sZGVyT2Zmc2V0LmxlZnQsXG4gICAgICB5ID0gZXZlbnQucGFnZVkgLSBwbGFjZWhvbGRlck9mZnNldC50b3AsXG4gICAgICBjcmVhdGVUcmFuc2Zvcm1UYXNrID0gdGhpcy50YXNrcy5nZXRUYXNrKFwiQ3JlYXRlVHJhbnNmb3JtVGFza1wiKSxcbiAgICAgIGN1cnNvckl0ZW1PcHRpb25UYXNrID0gdGhpcy50YXNrcy5nZXRUYXNrKFwiQ3Vyc29ySXRlbU9wdGlvblRhc2tcIiksXG4gICAgICBoaWdobGlnaHRJdGVtT3B0aW9uVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIkhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrXCIpLFxuICAgICAgbmV3Q3Vyc29ySXRlbUlkID0gY3JlYXRlVHJhbnNmb3JtVGFzay5nZXRUcmVlSXRlbUZvck1vdXNlUG9zaXRpb24oeCwgeSwgaGlnaGxpZ2h0SXRlbU9wdGlvblRhc2suZ2V0R3Jhdml0eVJhZGl1cygpKTtcbiAgICB2YXIgdGFyZ2V0OiBIVE1MRWxlbWVudCB8IG51bGwgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKG5ld0N1cnNvckl0ZW1JZCAhPT0gbnVsbCkge1xuICAgICAgaWYgKHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpID09PSBcImNoZWNrYm94XCIgfHwgdGFyZ2V0LmdldEF0dHJpYnV0ZShcIm5hbWVcIikgPT09IFwic2VsZWN0aW9udGV4dFwiKSB7IC8vaWdub3JlIGpzbGludFxuXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGN1cnNvckl0ZW1PcHRpb25UYXNrLmhhc0N1cnNvckVuYWJsZWQoKSkge1xuICAgICAgICAgIHRoaXMuc2V0Q3Vyc29ySXRlbShldmVudCwgbmV3Q3Vyc29ySXRlbUlkKTtcbiAgICAgICAgICB0aGlzLmNvbnRyb2xQYW5lbFJlZiEubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25DaGVja2JveENoYW5nZShldmVudDogRXZlbnQpIHtcbiAgICBsZXQgeyBzZWxlY3RlZEl0ZW1zIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBuZXdTZWxlY3RlZEl0ZW1zID0gW107XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgdmFyIGl0ZW1JZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpO1xuICAgIGNvbnN0IGNoZWNrZWQgPSB0YXJnZXQuY2hlY2tlZFxuICAgIGxldCBjYW5jZWwgPSBmYWxzZTtcbiAgICBpZiAoaXRlbUlkICE9IG51bGwpIHtcbiAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgIG5ld1NlbGVjdGVkSXRlbXMgPSBbLi4uc2VsZWN0ZWRJdGVtcywgaXRlbUlkXTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgbmV3U2VsZWN0ZWRJdGVtcyA9IHNlbGVjdGVkSXRlbXMuZmlsdGVyKGlkID0+IGlkICE9IGl0ZW1JZCk7IC8vIFVzZXIgdHlwZSBtYXkgbm90IG1hY2ggc3RyaW5nIHZhbHVlIGluIGRhdGEgYXR0cmlidXRlXG4gICAgICB9XG4gICAgICB2YXIgZXZlbnRBcmdzID0gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2luZyhldmVudCwgc2VsZWN0ZWRJdGVtcywgbmV3U2VsZWN0ZWRJdGVtcyk7XG4gICAgICBpZiAoIWV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc2VsZWN0ZWRJdGVtczogbmV3U2VsZWN0ZWRJdGVtc1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZWQoZXZlbnRBcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbktleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICB2YXIgaGlnaGxpZ2h0SXRlbVRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soXCJIaWdobGlnaHRJdGVtVGFza1wiKSxcbiAgICAgIGhpZ2hsaWdodEl0ZW1PcHRpb25UYXNrID0gdGhpcy50YXNrcy5nZXRUYXNrKFwiSGlnaGxpZ2h0SXRlbU9wdGlvblRhc2tcIiksXG4gICAgICBjdXJzb3JJdGVtVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIkN1cnNvckl0ZW1UYXNrXCIpLFxuICAgICAgY3Vyc29ySXRlbU9wdGlvblRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soXCJDdXJzb3JJdGVtT3B0aW9uVGFza1wiKSxcbiAgICAgIGFsaWduRGlhZ3JhbVRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soJ0FsaWduRGlhZ3JhbVRhc2snKSxcbiAgICAgIGNyZWF0ZVRyYW5zZm9ybVRhc2sgPSB0aGlzLnRhc2tzLmdldFRhc2soJ0NyZWF0ZVRyYW5zZm9ybVRhc2snKSxcbiAgICAgIHRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybVRhc2suZ2V0VHJhbnNmb3JtKCksXG4gICAgICBuYXZpZ2F0aW9uSXRlbSA9IG51bGwsXG4gICAgICBuZXdOYXZpZ2F0aW9uSXRlbSxcbiAgICAgIGRpcmVjdGlvbiA9IG51bGwsXG4gICAgICBhY2NlcHRlZDtcblxuICAgIGlmIChoaWdobGlnaHRJdGVtT3B0aW9uVGFzay5oYXNIaWdobGlnaHRFbmFibGVkKCkgJiYgY3Vyc29ySXRlbU9wdGlvblRhc2suaGFzQ3Vyc29yRW5hYmxlZCgpKSB7XG4gICAgICBuYXZpZ2F0aW9uSXRlbSA9IGhpZ2hsaWdodEl0ZW1UYXNrLmdldEhpZ2hsaWdodFRyZWVJdGVtKCk7XG4gICAgICBpZiAobmF2aWdhdGlvbkl0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgbmF2aWdhdGlvbkl0ZW0gPSBjdXJzb3JJdGVtVGFzay5nZXRDdXJzb3JUcmVlSXRlbSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGlnaGxpZ2h0SXRlbU9wdGlvblRhc2suaGFzSGlnaGxpZ2h0RW5hYmxlZCgpKSB7XG4gICAgICBuYXZpZ2F0aW9uSXRlbSA9IGhpZ2hsaWdodEl0ZW1UYXNrLmdldEhpZ2hsaWdodFRyZWVJdGVtKCk7XG4gICAgfSBlbHNlIGlmIChjdXJzb3JJdGVtT3B0aW9uVGFzay5oYXNDdXJzb3JFbmFibGVkKCkpIHtcbiAgICAgIG5hdmlnYXRpb25JdGVtID0gY3Vyc29ySXRlbVRhc2suZ2V0Q3Vyc29yVHJlZUl0ZW0oKTtcbiAgICB9XG5cblxuICAgIGlmIChuYXZpZ2F0aW9uSXRlbSAhPSBudWxsKSB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LndoaWNoKSB7XG4gICAgICAgIGNhc2UgMTM6IC8qRW50ZXIqL1xuICAgICAgICAgIGlmIChjdXJzb3JJdGVtT3B0aW9uVGFzay5oYXNDdXJzb3JFbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29ySXRlbShldmVudCwgbmF2aWdhdGlvbkl0ZW0pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbFBhbmVsUmVmIS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQwOiAvKkRvd24qL1xuICAgICAgICAgIGRpcmVjdGlvbiA9IE9yaWVudGF0aW9uVHlwZS5Cb3R0b207XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzg6IC8qVXAqL1xuICAgICAgICAgIGRpcmVjdGlvbiA9IE9yaWVudGF0aW9uVHlwZS5Ub3A7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzc6IC8qTGVmdCovXG4gICAgICAgICAgZGlyZWN0aW9uID0gT3JpZW50YXRpb25UeXBlLkxlZnQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzk6IC8qUmlnaHQqL1xuICAgICAgICAgIGRpcmVjdGlvbiA9IE9yaWVudGF0aW9uVHlwZS5SaWdodDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKGRpcmVjdGlvbiAhPSBudWxsKSB7XG5cbiAgICAgICAgYWNjZXB0ZWQgPSBmYWxzZTtcblxuICAgICAgICB3aGlsZSAoIWFjY2VwdGVkKSB7XG4gICAgICAgICAgYWNjZXB0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgZGlyZWN0aW9uID0gdHJhbnNmb3JtLmdldE9yaWVudGF0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgICAgbmV3TmF2aWdhdGlvbkl0ZW0gPSBhbGlnbkRpYWdyYW1UYXNrLmdldE5leHRJdGVtKG5hdmlnYXRpb25JdGVtLCBkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgaWYgKG5ld05hdmlnYXRpb25JdGVtICE9IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoaGlnaGxpZ2h0SXRlbU9wdGlvblRhc2suaGFzSGlnaGxpZ2h0RW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0SGlnaGxpZ2h0SXRlbShldmVudCwgbmV3TmF2aWdhdGlvbkl0ZW0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJzb3JJdGVtT3B0aW9uVGFzay5oYXNDdXJzb3JFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3JJdGVtKGV2ZW50LCBuZXdOYXZpZ2F0aW9uSXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250cm9sUGFuZWxSZWYhLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRTdGF0ZShuZXdTdGF0ZTogUGFydGlhbDxCYXNlRGlhZ3JhbVN0YXRlPiA9IHt9KSB7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAuLi5uZXdTdGF0ZVxuICAgIH07XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy50YXNrcy5wcm9jZXNzKCdPcHRpb25zVGFzaycsIG51bGwsIGZhbHNlKTtcblxuICAgIGNvbnN0IHsgXG4gICAgICBwbGFjZWhvbGRlciwgXG4gICAgICBjYWxsb3V0cGxhY2Vob2xkZXI6IGNhbGxvdXRQbGFjZWhvbGRlcixcbiAgICAgIGZyYW1lcGxhY2Vob2xkZXI6IGZyYW1lUGxhY2Vob2xkZXIsIFxuICAgICAgdGl0bGVzcGxhY2Vob2xkZXI6IHRpdGxlc1BsYWNlaG9sZGVyXG4gICAgfSA9IHRoaXMuZ3JhcGhpY3MucGxhY2Vob2xkZXJzO1xuXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICAgIHRoaXMudGl0bGVzUGxhY2Vob2xkZXIgPSB0aXRsZXNQbGFjZWhvbGRlcjtcbiAgICB0aGlzLmZyYW1lUGxhY2Vob2xkZXIgPSBmcmFtZVBsYWNlaG9sZGVyO1xuICAgIHRoaXMuY2FsbG91dFBsYWNlaG9sZGVyID0gY2FsbG91dFBsYWNlaG9sZGVyO1xuXG4gICAgY29uc3QgeyBcbiAgICAgIGF1dG9TaXplLCAvLyByZXNpemUgY29udHJvbCBpZiB0cnVlXG4gICAgICBjb250cm9sU2l6ZSwgLy8gU2V0cyBjb250cm9sIFNpemUgaW4gYXV0byBzY2FsZSBtb2RlXG4gICAgICBzY2FsZSwgLy8gc2NhbGUgaXMgbmVlZGVkIGZvciBzY2FsZSB0cmFuc2Zvcm0gQ1NTIGNyZWF0aW9uXG4gICAgICBmcmFtZU1vdXNlUGFuZWxSZWN0LFxuICAgICAgdGl0bGVzTW91c2VQYW5lbFJlY3QsXG4gICAgICBzY3JvbGxQYW5lbFJlY3QsXG4gICAgICBtb3VzZVBhbmVsU2l6ZSAvLyBDb250ZW50IG1vdXNlIHBhbmVsIHNpemVcbiAgICB9ID0gdGhpcy5sYXlvdXRPcHRpb25zO1xuXG4gICAgdmFyIHNjYWxlVGV4dCA9IFwic2NhbGUoXCIgKyBzY2FsZSArIFwiLFwiICsgc2NhbGUgKyBcIilcIjtcblxuICAgIHRoaXMuY29udHJvbFBhbmVsU3R5bGUgPSBhdXRvU2l6ZSA/IGNvbnRyb2xTaXplLmdldENTUyEoKSA6IHt9O1xuICAgIHRoaXMuZnJhbWVNb3VzZVBhbmVsU3R5bGUgPSBmcmFtZU1vdXNlUGFuZWxSZWN0LmdldENTUygpO1xuXG4gICAgaWYoZnJhbWVQbGFjZWhvbGRlcikge1xuICAgIHRoaXMuZnJhbWVQbGFjZWhvbGRlclN0eWxlID0ge1xuICAgICAgICAuLi4oZnJhbWVQbGFjZWhvbGRlci5yZWN0IS5nZXRDU1MoKSksXG4gICAgICAgIFwidHJhbnNmb3JtXCI6IHNjYWxlVGV4dCxcbiAgICAgICAgXCJtc1RyYW5zZm9ybVwiOiBzY2FsZVRleHQsXG4gICAgICAgIFwiV2Via2l0VHJhbnNmb3JtXCI6IHNjYWxlVGV4dCxcbiAgICAgICAgXCJPVHJhbnNmb3JtXCI6IHNjYWxlVGV4dCxcbiAgICAgICAgXCJNb3pUcmFuc2Zvcm1cIjogc2NhbGVUZXh0XG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLnRpdGxlc01vdXNlUGFuZWxTdHlsZSA9IHtcbiAgICAgIC4uLnRpdGxlc01vdXNlUGFuZWxSZWN0LmdldENTUygpXG4gICAgfTtcblxuICAgIFxuICAgIGlmKHRpdGxlc1BsYWNlaG9sZGVyKSB7XG4gICAgICB0aGlzLnRpdGxlc1BsYWNlaG9sZGVyU3R5bGUgPSB7XG4gICAgICAgIC4uLih0aXRsZXNQbGFjZWhvbGRlci5yZWN0LmdldENTUygpKSxcbiAgICAgICAgXCJ0cmFuc2Zvcm1PcmlnaW5cIjogXCIwIDBcIixcbiAgICAgICAgXCJ0cmFuc2Zvcm1cIjogc2NhbGVUZXh0LFxuICAgICAgICBcIm1zVHJhbnNmb3JtXCI6IHNjYWxlVGV4dCxcbiAgICAgICAgXCJXZWJraXRUcmFuc2Zvcm1cIjogc2NhbGVUZXh0LCBcbiAgICAgICAgXCJPVHJhbnNmb3JtXCI6IHNjYWxlVGV4dCwgXG4gICAgICAgIFwiTW96VHJhbnNmb3JtXCI6IHNjYWxlVGV4dFxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbFBhbmVsU3R5bGUgPSB7XG4gICAgICAuLi4oc2Nyb2xsUGFuZWxSZWN0LmdldENTUygpKSxcbiAgICAgIGJvcmRlcjogKHNjcm9sbFBhbmVsUmVjdC54ID4gMCA/IFwiMXB4IGRvdHRlZCAjZGRkZGRkXCIgOiBcIlwiKVxuICAgIH07XG5cbiAgICB0aGlzLm1vdXNlUGFuZWxTdHlsZSA9IHtcbiAgICAgIC4uLihtb3VzZVBhbmVsU2l6ZS5nZXRDU1MhKCkpXG4gICAgfTtcblxuICAgIHRoaXMucGxhY2Vob2xkZXJTdHlsZSA9IHtcbiAgICAgIC4uLihwbGFjZWhvbGRlci5yZWN0LmdldENTUygpKSxcbiAgICAgIFwidHJhbnNmb3JtXCI6IHNjYWxlVGV4dCxcbiAgICAgIFwibXNUcmFuc2Zvcm1cIjogc2NhbGVUZXh0LFxuICAgICAgXCJXZWJraXRUcmFuc2Zvcm1cIjogc2NhbGVUZXh0LFxuICAgICAgXCJPVHJhbnNmb3JtXCI6IHNjYWxlVGV4dCxcbiAgICAgIFwiTW96VHJhbnNmb3JtXCI6IHNjYWxlVGV4dCBcbiAgICB9XG4gICAgaWYoY2FsbG91dFBsYWNlaG9sZGVyKSB7XG4gICAgICB0aGlzLmNhbGxvdXRQbGFjZWhvbGRlclN0eWxlID0ge1xuICAgICAgICBsZWZ0OiBjYWxsb3V0UGxhY2Vob2xkZXIucmVjdC54ICsgXCJweFwiLFxuICAgICAgICB0b3A6IGNhbGxvdXRQbGFjZWhvbGRlci5yZWN0LnkgKyBcInB4XCJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgeyBjZW50ZXJPbkN1cnNvciB9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAoY2VudGVyT25DdXJzb3IpIHtcbiAgICAgIGNvbnN0IGNlbnRlck9uQ3Vyc29yVGFzayA9IHRoaXMudGFza3MuZ2V0VGFzayhcIkNlbnRlck9uQ3Vyc29yVGFza1wiKTtcbiAgICAgIHRoaXMucGxhY2Vob2xkZXJPZmZzZXQgPSBjZW50ZXJPbkN1cnNvclRhc2suZ2V0UGxhY2Vob2xkZXJPZmZzZXQoKTtcbiAgICB9XG4gIH1cblxuICAvKiBDb21wb25lbnQgdGVtcGxhdGUgcHJvcGVydGllcyAqL1xuXG4gIHBsYWNlaG9sZGVyOiBQbGFjZWhvbGRlciB8IG51bGwgPSBudWxsO1xuICBmcmFtZVBsYWNlaG9sZGVyOiBQbGFjZWhvbGRlciB8IG51bGwgPSBudWxsO1xuICB0aXRsZXNQbGFjZWhvbGRlcjogUGxhY2Vob2xkZXIgfCBudWxsID0gbnVsbDtcbiAgY2FsbG91dFBsYWNlaG9sZGVyOiBQbGFjZWhvbGRlciB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnRyb2xQYW5lbFN0eWxlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsPiA9IHt9O1xuICBmcmFtZU1vdXNlUGFuZWxTdHlsZTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbD4gPSB7fTtcbiAgZnJhbWVQbGFjZWhvbGRlclN0eWxlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsPiA9IHt9O1xuICB0aXRsZXNNb3VzZVBhbmVsU3R5bGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGw+ID0ge307XG4gIHRpdGxlc1BsYWNlaG9sZGVyU3R5bGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGw+ID0ge307XG4gIHNjcm9sbFBhbmVsU3R5bGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGw+ID0ge307XG4gIHBsYWNlaG9sZGVyT2Zmc2V0OiBQb2ludCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgbW91c2VQYW5lbFN0eWxlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsPiA9IHt9O1xuICBwbGFjZWhvbGRlclN0eWxlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsPiA9IHt9O1xuICBjYWxsb3V0UGxhY2Vob2xkZXJTdHlsZTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbD4gPSB7fTtcblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICAvLyBkZXN0cm95IHRpbWVyXG4gICAgaWYodGhpcy50aW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgICAgdGhpcy50aW1lciA9IG51bGw7XG4gICAgfVxuICAgIC8vIGRlc3Ryb3kgb2JzZXJ2ZXJcbiAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfVxufVxuIiwiPCEtLSByb290IGNvbnRyb2wgcGFuZWwgLS0+XG48ZGl2ICNjb250cm9sUGFuZWxSZWZcbiAgY2xhc3M9XCJjb250cm9sLXBhbmVsXCJcbiAgW25nU3R5bGVdPVwiY29udHJvbFBhbmVsU3R5bGVcIlxuICAoa2V5ZG93bik9XCJvbktleURvd24oJGV2ZW50KVwiXG4gIHRhYkluZGV4PVwiMFwiXG4+XG4gIDxkaXYgKm5nSWY9XCJmcmFtZVBsYWNlaG9sZGVyXCJcbiAgICAjZnJhbWVNb3VzZVBhbmVsUmVmXG4gICAgY2xhc3M9XCJmcmFtZS1tb3VzZS1wYW5lbFwiXG4gICAgW25nU3R5bGVdPVwiZnJhbWVNb3VzZVBhbmVsU3R5bGVcIlxuICAgIChjbGljayk9XCJvbkZyYW1lQ2xpY2soJGV2ZW50KVwiXG4gICAgKG1vdXNlbW92ZSk9XCJvbkZyYW1lTW91c2VNb3ZlKCRldmVudClcIlxuICA+XG4gICAgPGRpdiAjZnJhbWVQbGFjZWhvbGRlclJlZlxuICAgICAgY2xhc3M9XCJmcmFtZS1wbGFjZWhvbGRlclwiIFxuICAgICAgW25nU3R5bGVdPVwiZnJhbWVQbGFjZWhvbGRlclN0eWxlXCJcbiAgICA+XG4gICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwibGF5ZXJUZW1wbGF0ZTsgY29udGV4dDogeyRpbXBsaWNpdDogZnJhbWVQbGFjZWhvbGRlcn1cIj48L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgKm5nSWY9XCJ0aXRsZXNQbGFjZWhvbGRlclwiXG4gICAgI3RpdGxlc01vdXNlUGFuZWxSZWZcbiAgICBjbGFzcz1cInRpdGxlcy1tb3VzZS1wYW5lbFwiXG4gICAgW25nU3R5bGVdPVwidGl0bGVzTW91c2VQYW5lbFN0eWxlXCJcbiAgICAobW91c2Vtb3ZlKT1cIm9uRnJhbWVNb3VzZU1vdmUoJGV2ZW50KVwiXG4gICAgKGNsaWNrKT1cIm9uRnJhbWVDbGljaygkZXZlbnQpXCJcbiAgPlxuICAgIDxkaXYgI3RpdGxlc1BsYWNlaG9sZGVyUmVmXG4gICAgICBbbmdTdHlsZV09XCJ0aXRsZXNQbGFjZWhvbGRlclN0eWxlXCJcbiAgICAgIGNsYXNzPVwidGl0bGVzLXBsYWNlaG9sZGVyXCJcbiAgICAgPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImxheWVyVGVtcGxhdGU7IGNvbnRleHQ6IHskaW1wbGljaXQ6IHRpdGxlc1BsYWNlaG9sZGVyfVwiPjwvbmctY29udGFpbmVyPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdlxuICAgICNzY3JvbGxQYW5lbFJlZlxuICAgIGNsYXNzPVwic2Nyb2xsLXBhbmVsXCJcbiAgICBbbmdTdHlsZV09XCJzY3JvbGxQYW5lbFN0eWxlXCJcbiAgICAoc2Nyb2xsKT1cIm9uU2Nyb2xsKCRldmVudClcIlxuICAgIFtzY3JvbGxMZWZ0XT1cInBsYWNlaG9sZGVyT2Zmc2V0ID8gcGxhY2Vob2xkZXJPZmZzZXQueCA6IHVuZGVmaW5lZFwiXG4gICAgW3Njcm9sbFRvcF09XCJwbGFjZWhvbGRlck9mZnNldCA/IHBsYWNlaG9sZGVyT2Zmc2V0LnkgOiB1bmRlZmluZWRcIlxuICA+XG4gICAgPGRpdiAjbW91c2VQYW5lbFJlZlxuICAgICAgY2xhc3M9XCJtb3VzZS1wYW5lbFwiXG4gICAgICBbbmdTdHlsZV09XCJtb3VzZVBhbmVsU3R5bGVcIlxuICAgICAgKG1vdXNlbW92ZSk9XCJvbk1vdXNlTW92ZSgkZXZlbnQpXCJcbiAgICAgIChjbGljayk9XCJvbkNsaWNrKCRldmVudClcIlxuICAgICAgKGNoYW5nZSk9XCJvbkNoZWNrYm94Q2hhbmdlKCRldmVudClcIlxuICAgID5cbiAgICAgIDxkaXYgI3BsYWNlaG9sZGVyUmVmXG4gICAgICAgIGNsYXNzPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICBbbmdTdHlsZV09XCJwbGFjZWhvbGRlclN0eWxlXCJcbiAgICAgID5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImxheWVyVGVtcGxhdGU7IGNvbnRleHQ6IHskaW1wbGljaXQ6IHBsYWNlaG9sZGVyfVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICA8ZGl2ICpuZ0lmPVwiY2FsbG91dFBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAjY2FsbG91dFBsYWNlaG9sZGVyUmVmXG4gICAgICAgICAgY2xhc3M9XCJjYWxsb3V0LXBsYWNlaG9sZGVyXCJcbiAgICAgICAgICBbbmdTdHlsZV09XCJjYWxsb3V0UGxhY2Vob2xkZXJTdHlsZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwibGF5ZXJUZW1wbGF0ZTsgY29udGV4dDogeyRpbXBsaWNpdDogY2FsbG91dFBsYWNlaG9sZGVyfVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48IS0tVGVtcGxhdGVzOiAtLT5cbjxuZy10ZW1wbGF0ZSAjbGF5ZXJUZW1wbGF0ZSBsZXQtcGxhY2Vob2xkZXI+XG4gIDxkaXYgKm5nRm9yPVwibGV0IGxheWVyIG9mIHBsYWNlaG9sZGVyLmxheWVyc1wiIGNsYXNzPVwibGF5ZXJcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwibGF5ZXJcIj5cbiAgICAgIDxkaXYgKm5nRm9yPVwibGV0IGxhYmVsIG9mIGxheWVyLmxhYmVsc1wiIGNsYXNzPVwibGFiZWxcIiBbbmdTdHlsZV09IFwibGFiZWwuc3R5bGVcIj5cbiAgICAgICAgPHJvdGF0ZWQtdGV4dFxuICAgICAgICAgIFt3aWR0aF09XCJsYWJlbC53aWR0aFwiXG4gICAgICAgICAgW2hlaWdodF09XCJsYWJlbC5oZWlnaHRcIlxuICAgICAgICAgIFtvcmllbnRhdGlvbl09XCJsYWJlbC5vcmllbnRhdGlvblwiXG4gICAgICAgICAgW2hvcml6b250YWxBbGlnbm1lbnRdPVwibGFiZWwuaG9yaXpvbnRhbEFsaWdubWVudFwiXG4gICAgICAgICAgW3ZlcnRpY2FsQWxpZ25tZW50XT1cImxhYmVsLnZlcnRpY2FsQWxpZ25tZW50XCJcbiAgICAgICAgPnt7bGFiZWwubGFiZWx9fTwvcm90YXRlZC10ZXh0PlxuICAgICAgPC9kaXY+XG4gICAgICA8c3ZnIFxuICAgICAgICAqbmdJZj1cImxheWVyLnBvbHlsaW5lcy5sZW5ndGggPiAwXCJcbiAgICAgICAgYXR0ci5oZWlnaHQucHg9XCJ7e3BsYWNlaG9sZGVyLnNpemUuaGVpZ2h0fX1cIlxuICAgICAgICBhdHRyLndpZHRoLnB4PVwie3twbGFjZWhvbGRlci5zaXplLndpZHRofX1cIlxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgW25nU3R5bGVdPVwie3dpZHRoOiBwbGFjZWhvbGRlci5zaXplLndpZHRoICsgJ3B4JywgaGVpZ2h0OiBwbGFjZWhvbGRlci5zaXplLmhlaWdodCArICdweCd9XCJcbiAgICAgID5cbiAgICAgICAgPHBhdGggKm5nRm9yPVwibGV0IHBhdGggb2YgbGF5ZXIucG9seWxpbmVzXCIgW2F0dHIuZF09XCJwYXRoLmRhdGFcIiBbbmdTdHlsZV09XCJwYXRoLnN0eWxlXCI+PC9wYXRoPlxuICAgICAgPC9zdmc+XG4gICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBpdGVtIG9mIGxheWVyLml0ZW1zO1wiIGNsYXNzPVwidGVtcGxhdGVcIiBbbmdTdHlsZV09XCJpdGVtLnN0eWxlXCI+XG4gICAgICAgIDxuZy1jb250YWluZXIgW25nU3dpdGNoXT1cIml0ZW0udGVtcGxhdGVUeXBlXCI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2l0ZW1UZW1wbGF0ZSdcIj5cbiAgICAgICAgICAgIDxicC1pdGVtIFtpdGVtQ29uZmlnXT1cIml0ZW0uY29udGV4dC5jb250ZXh0XCIgW2l0ZW1UaXRsZUZpcnN0Rm9udENvbG9yXT1cIml0ZW0uY29udGV4dC5pdGVtVGl0bGVGaXJzdEZvbnRDb2xvclwiIFtpdGVtVGl0bGVTZWNvbmRGb250Q29sb3JdPVwiaXRlbS5jb250ZXh0Lml0ZW1UaXRsZVNlY29uZEZvbnRDb2xvclwiPjwvYnAtaXRlbT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInY2hlY2tib3hUZW1wbGF0ZSdcIj5cbiAgICAgICAgICAgIDxicC1jaGVja2JveCBbaWRdPVwiaXRlbS5jb250ZXh0LmlkXCIgW2lzU2VsZWN0ZWRdPVwiaXRlbS5jb250ZXh0LmlzU2VsZWN0ZWRcIiBbbGFiZWxdPVwiaXRlbS5jb250ZXh0LnNlbGVjdENoZWNrQm94TGFiZWxcIj48L2JwLWNoZWNrYm94PlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cIidncm91cFRpdGxlVGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8YnAtZ3JvdXAtdGl0bGUgW29wdGlvbnNdPVwiaXRlbS5jb250ZXh0XCIgW2l0ZW1Db25maWddPVwiaXRlbS5jb250ZXh0LmNvbnRleHRcIiBbd2lkdGhdPVwiaXRlbS5jb250ZXh0LndpZHRoXCIgW2hlaWdodF09XCJpdGVtLmNvbnRleHQuaGVpZ2h0XCI+PC9icC1ncm91cC10aXRsZT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInY3Vyc29yVGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8YnAtY3Vyc29yIFt0ZW1wbGF0ZUNvbmZpZ109XCJpdGVtLmNvbnRleHQudGVtcGxhdGVDb25maWdcIj48L2JwLWN1cnNvcj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInaGlnaGxpZ2h0VGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8YnAtaGlnaGxpZ2h0IFt0ZW1wbGF0ZUNvbmZpZ109XCJpdGVtLmNvbnRleHQudGVtcGxhdGVDb25maWdcIj48L2JwLWhpZ2hsaWdodD5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInZG90SGlnaGxpZ2h0VGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8YnAtZG90LWhpZ2hsaWdodCBbdGVtcGxhdGVDb25maWddPVwiaXRlbS5jb250ZXh0LnRlbXBsYXRlQ29uZmlnXCI+PC9icC1kb3QtaGlnaGxpZ2h0PlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cIidsZXZlbFRpdGxlVGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8YnAtbGV2ZWwtdGl0bGUgW29wdGlvbnNdPVwiaXRlbS5jb250ZXh0XCIgW2Fubm90YXRpb25Db25maWddPVwiaXRlbS5jb250ZXh0LmNvbnRleHRcIiBbd2lkdGhdPVwiaXRlbS5jb250ZXh0LndpZHRoXCIgW2hlaWdodF09XCJpdGVtLmNvbnRleHQuaGVpZ2h0XCI+PC9icC1sZXZlbC10aXRsZT5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInbGV2ZWxCYWNrZ3JvdW5kVGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8YnAtbGV2ZWwtYmFja2dyb3VuZCBbYW5ub3RhdGlvbkNvbmZpZ109XCJpdGVtLmNvbnRleHQuY29udGV4dFwiPjwvYnAtbGV2ZWwtYmFja2dyb3VuZD5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInbGFiZWxBbm5vdGF0aW9uVGVtcGxhdGUnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWwtYW5ub3RhdGlvblwiPnt7aXRlbS5jb250ZXh0LmNvbnRleHQudGl0bGV9fTwvZGl2PlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cIidhbm5vdGF0aW9uTGFiZWxUZW1wbGF0ZSdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsYWJlbC1hbm5vdGF0aW9uXCI+e3tpdGVtLmNvbnRleHQuY29udGV4dC5sYWJlbH19PC9kaXY+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hEZWZhdWx0PlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW0udGVtcGxhdGVSZWY7IGNvbnRleHQ6IGl0ZW0uY29udGV4dFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=